/*!1.2.6 kooboy_li@163.com*/!function(){var e=document,t=window;if(e._magix)t.postMessage({from:"mx_ispt",action:"expand"},"*");else{t.addEventListener("message",function(e){var t=e.data;t&&"mx_ispt"==t.from&&"expand"==t.action&&l.expand()},!1),e._magix=1;var a={created:"#008B00",init:"#FF3030",alter:"#BC8F8F",isolated:"#FF3030",build:"#9AC0CD",destroy:"#8B5F65",remove:"#EED5B7",active:"#94d694"},i={width:550,height:470,canvasWidth:530,canvasHeight:400,moreInfoWidth:490,titleHeight:34,circleMargin:6,minCircleRadius:15,managerCols:5,managerMargin:5,managerHeight:40,managerGroupSpace:40,gradualStartColor:{r:0,g:153,b:102},gradualEndColor:{r:255,g:255,b:0},eventsCommonCount:15,sharedCount:5,locationCount:12,mixinsCount:5,stateCount:12},n=["FFC125","C71585","CDBA96","FF7F00","BA55D3","8B4726","7CFC00","4A4A4A","EE7AE9"],r={cache:"#CC9966",cleaned:"#99CCCC",cleans:"#FF9999",normal:"#CCCC99"},o={alter:"mxi-09-d2",bad:"mxi-09-65"},s={get:function(e,t,a){var i,n=e(window),r=e(document),o=function(e){(e=window.getSelection)?e().removeAllRanges():(e=window.document.selection)&&(e.empty?e.empty():e=null)},s=function(e){e.preventDefault()},l=function(e){i.iMove&&i.move(e)},c=function(a){if(i){r[t]("mousemove touchmove",l)[t]("mouseup touchend",c)[t]("keydown mousewheel DOMMouseScroll",s),n[t]("blur",c);var o=i.node;e(o)[t]("losecapture",c),o.setCapture&&o.releaseCapture(),i.iStop&&i.stop(a),i=null}};return{begin:function(t,d,m){c(),t&&(o(),t.setCapture&&t.setCapture(),i={move:d,stop:m,node:t,iMove:a(d),iStop:a(m)},r.on("mousemove touchmove",l).on("mouseup touchend",c).on("keydown mousewheel DOMMouseScroll",s),n.on("blur",c),e(t).on("losecapture",c))},clear:o,end:c}}},l={main:'<div class="mxi-09-5c" id="mx"><ul class="mxi-09-c8 mxi-09-63" id="mx_tabs"><li class="mxi-09-fr mxi-09-p8 mxi-09-cp" id="mx_min">\u25b3</li><li class="mxi-09-fl mxi-09-p8 mxi-09-cp">VOM</li><li class="mxi-09-fl mxi-09-p8 mxi-09-cp">Tracer</li><li class="mxi-09-fl mxi-09-p8 mxi-09-cp">Manager</li></ul><div id="mx_painter"><div style="width:{width}px;height:{canvasHeight}px;overflow-x:auto;overflow-y:hidden" id="mx_view_cnt"><canvas width="{width}" height="{canvasHeight}" id="mx_view_canvas"></canvas></div><label class="mxi-09-fl mxi-09-ee"><input type="checkbox" class="mxi-09-61" id="mx_log_console"/>\u63a7\u5236\u53f0\u663e\u793aview\u4fe1\u606f</label><label class="mxi-09-fl mxi-09-ee"><input type="checkbox" class="mxi-09-61" id="mx_com_view" checked="checked"/>\u663e\u793a\u7ec4\u4ef6view</label><ul class="mxi-09-c8 mxi-09-fl" id="mx_view_total"></ul></div><div id="mx_trancer" style="height:{canvasHeight}px;overflow:scroll;overflow-x:auto;display:none;padding:8px"></div><div id="mx_manager" style="display:none"><div style="height:{canvasHeight}px;overflow:scroll;overflow-x:auto" id="mx_manager_cnt"><canvas width="{canvasWidth}" height="{canvasHeight}" id="mx_manager_canvas"></canvas></div><ul class="mxi-09-c8 mxi-09-p8" id="mx_manager_total"></ul></div><div id="mx_moreinfo"></div><div id="mx_manager_moreinfo"></div></div>',moreInfo:'<ul><li><b class="mxi-09-87">id:</b>{id}</li><li><b class="mxi-09-87">view:</b>{view}</li>{events} {location} {share} {mixins} {state}<li class="mxi-09-bc">{ex}</li><li><b class="mxi-09-87">resources</b></li><li style="{moreInfoWidth}px;overflow:auto;max-height:200px">{res}</li></ul>',moreManagerInfo:"<ul><li><b>key:</b>{id}</li><li><b>url:</b>{url}</li><li><b>\u63cf\u8ff0:</b>{desc}</li><li><b>\u7f13\u5b58:</b>{cache}</li><li><b>\u6e05\u7406\u7f13\u5b58:</b>{cleans}</li><li><b>\u9884\u5904\u7406:</b>{hasAfter}</li></ul>",total:'<li class="mxi-09-fl mxi-09-18 mxi-09-94">view\u7edf\u8ba1:[{count}]</li>',managerTotal:'<li class="mxi-09-fl mxi-09-18">{groups}\u4e2a\u63a5\u53e3\u6587\u4ef6\uff0c\u5171{total}\u4e2a\u63a5\u53e3</li>',setup:function(){var t=e.createElement("div");t.innerHTML=l.main.replace(/\{(\w+)\}/g,function(e,t){return i[t]}),e.documentElement.appendChild(t),l.attachEvent(),w.getEnv().dragIt("#mx","#mx_tabs")},attachEvent:function(){l.detachEvent();var t,a=w.getEnv();a.bind("mx_view_canvas","mousemove",l.$mousemove=function(e){clearTimeout(t),t=setTimeout(function(){var t=a.getDOMOffset("mx_view_canvas");l.onMousemove({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),a.bind("mx_view_canvas","mouseout",l.$mouseout=function(){clearTimeout(t),l.onMousemove({x:-1,y:-1})}),a.bind("mx_manager_canvas","mousemove",l.$mangerMousemove=function(e){clearTimeout(t),t=setTimeout(function(){var t=a.getDOMOffset("mx_manager_canvas");l.onManagerMousemove({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),a.bind("mx_manager_canvas","mouseout",l.$managerMouseout=function(){clearTimeout(t),l.onManagerMousemove({x:-1,y:-1})}),a.bind("mx_moreinfo","mouseover",l.$imouseover=function(){clearTimeout(l.$hideTimer)}),a.bind("mx_moreinfo","mouseout",l.$imouseout=function(){l.hideMoreInfo()}),a.bind("mx_log_console","click",function(){e.getElementById("mx_log_console").checked&&window.console.dir(a.getVOM().all())}),a.bind("mx_com_view","click",function(){w.drawTree()}),a.bind("mx","click",l.$click=function(t){var n;"mx_min"==t.target.id?(n=e.getElementById("mx"),"\u25b3"==t.target.innerHTML?(n.style.height=i.titleHeight+"px",n.style.width="40px",n.style.overflow="hidden",t.target.innerHTML="\u25bd",a.getNode("#mx_tabs").addClass("mxi-09-3d")):(n.style.height=i.height+"px",n.style.width=i.width+"px",n.style.overflow="inherit",t.target.innerHTML="\u25b3",a.getNode("#mx_tabs").removeClass("mxi-09-3d"))):"VOM"==t.target.innerHTML?((n=e.getElementById("mx_painter")).style.display="block",(n=e.getElementById("mx_trancer")).style.display="none",(n=e.getElementById("mx_manager")).style.display="none"):"Tracer"==t.target.innerHTML?((n=e.getElementById("mx_painter")).style.display="none",(n=e.getElementById("mx_manager")).style.display="none",(n=e.getElementById("mx_trancer")).style.display="block"):"Manager"==t.target.innerHTML&&((n=e.getElementById("mx_painter")).style.display="none",(n=e.getElementById("mx_trancer")).style.display="none",(n=e.getElementById("mx_manager")).style.display="block")})},expand:function(){var t=e.getElementById("mx_min"),a=w.getEnv();if("\u25bd"==t.innerHTML){var n=e.getElementById("mx");n.style.height=i.height+"px",n.style.width=i.width+"px",n.style.overflow="inherit",t.innerHTML="\u25b3",a.getNode("#mx_tabs").removeClass("mxi-09-3d")}},detachEvent:function(){var e=w.getEnv();e.unbind("mx_view_canvas","mousemove",l.$mousemove),e.unbind("mx_view_canvas","mouseout",l.$mouseout),e.unbind("mx_manager_canvas","mousemove",l.$managerMousemove),e.unbind("mx_manager_canvas","mouseout",l.$managerMouseout),e.unbind("mx_min","click",l.$click),e.unbind("mx_moreinfo","mouseoout",l.$imouseout),e.unbind("mx_moreinfo","mouseover",l.$imouseover)},showMoreInfo:function(t,a){clearTimeout(l.$hideTimer),e.getElementById("mx_log_console").checked&&window.console.log(t);var n=e.getElementById("mx_cover");n||((n=e.createElement("div")).className="mxi-09-ef",n.id="mx_cover",e.body.appendChild(n));var r=e.getElementById("mx_moreinfo");r.style.display="block";var o=a.center.x-i.moreInfoWidth/2-e.getElementById("mx_view_cnt").scrollLeft;r.style.left=o+"px",r.style.top=a.center.y+a.radius+i.titleHeight+5+"px";var s=w.getEnv();s.updateDOMStyle(n.style,t.id),n.style.display="block",r.innerHTML=l.moreInfo.replace(/\{(\w+)\}/g,function(e,n){switch(n){case"id":return a.id;case"view":if(t){if(t.$v||t.path)return t.path;if(t.view)return t.view.path}return"";case"events":var r=w.getEvents(t);return r.total?'<li><b class="mxi-09-87">listen:</b>'+r.list+"</li>":"";case"share":var o=w.getShared(t);return o.length?'<li><b class="mxi-09-87">share:</b>'+o+"</li>":"";case"location":var l=w.getLocation(t);if(l.path||l.keys&&l.keys.length){var c=[];return l.path&&c.push('<span style="color:#FFC125">path</span>'),l.keys&&(c=c.concat(l.keys)),'<li><b class="mxi-09-87">location:</b>'+c+"</li>"}return"";case"mixins":var d=w.getMixins(t);if(d.length){var m=s.getMixinId(d);return'<li><b class="mxi-09-87">mixins:</b>'+(m=m.join(","))+"</li>"}return"";case"state":var g=w.getState(t);return g.length?'<li><b class="mxi-09-87">state:</b>'+g.join(",")+"</li>":"";case"ex":if(a.il)return"\u88ab\u5b64\u7acb\u7684\u8282\u70b9\uff0c\u597d\u53ef\u601c\u2026\u2026";if(!t)return"vframe\u5df2\u88ab\u9500\u6bc1\uff0c\u4f46\u672a\u4ecevom\u4e2d\u79fb\u9664";if(t.path){if(t.cM&&!t.view||t.$c&&!t.$v)return"\u672a\u52a0\u8f7dview"}else if(!t.view)return"\u672a\u52a0\u8f7dview";if(t.cM){if(!t.fcc)return t.rC!=t.cC?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d"}else if(!t.$cr)return t.$rc!=t.$cc?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d";return t.fca||t.$ca?"\u7b49\u5f85view\u6e32\u67d3":"";case"res":var u=[],h=t&&t.view&&t.view.$res,f=void 0;if(h=h||t&&t.$v&&t.$v.$r){for(var v in h){f=!0;break}if(f){u.push('<table style="width:100%"><tr><td>key</td><td>type</td></tr>');for(var v in h)u.push("<tr><td>",v,"</td><td>",s.getResType(h[v]),"</td></tr>");u.push("</table>")}}return u.join("");default:return i[n]}})},hideMoreInfo:function(){var t=e.getElementById("mx_moreinfo"),a=e.getElementById("mx_cover");l.$hideTimer=setTimeout(function(){t.style.display="none",a.style.display="none"},150)},showManagerMoreInfo:function(t){clearTimeout(l.$hideManagerTimer);var a=e.getElementById("mx_manager_moreinfo");a.style.display="block",a.style.left=t.rect[0]+"px";var n=t.rect[1]+t.rect[3]+i.titleHeight;n-=e.getElementById("mx_manager_cnt").scrollTop,a.style.top=n+"px",a.innerHTML=l.moreManagerInfo.replace(/\{(\w+)\}/g,function(e,a){switch(a){case"id":return t.id;default:return t[a]}})},hideManagerMoreInfo:function(){var t=e.getElementById("mx_manager_moreinfo");l.$hideManagerTimer=setTimeout(function(){t.style.display="none"},150)},showManagerTotal:function(t){e.getElementById("mx_manager_total").innerHTML=l.managerTotal.replace(/\{(\w+)\}/g,function(e,a){switch(a){case"groups":return t.groups.length;case"total":return t.total}})},showTotal:function(t){e.getElementById("mx_view_total").innerHTML=l.total.replace(/\{(\w+)\}/g,function(e,a){switch(a){case"count":return"com:"+t.comTotal+",vom:"+t.vomTotal+",total:"+t.total}})},updateManagerCanvasHeight:function(t){e.getElementById("mx_manager_canvas").height=0|t},updateVOMCanvansWidth:function(t){var a=e.getElementById("mx_view_canvas");a.width=0|t,a.parentNode.scrollLeft=(a.width-i.canvasWidth)/2},onMousemove:function(e){},onManagerMousemove:function(e){}};!function(e,t){var a=document.createElement("style");document.documentElement.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}(0,'vframe{display:block}.mxi-09-a9:before{width:12px;content:"M";height:12px;border-radius:6px;position:absolute;background-color:#008b00;opacity:.4;font-size:10px;line-height:12px;text-align:center;color:#fff}.mxi-09-65:before{background-color:#ff3030}.mxi-09-d2:before{background-color:#bc8f8f}.mxi-09-87{padding-right:5px}.mxi-09-63{background:#eee;cursor:move;margin:0;padding:0}.mxi-09-5c{position:fixed;right:20px;top:20px;width:550px;height:470px;z-index:2147483647;box-shadow:0 0 5px #b9b9b9;background-color:#fff;font-size:12px;line-height:1.5}.mxi-09-ef{position:absolute;opacity:.7;background-color:#90ee90}.mxi-09-5c ul{list-style:none;padding:0;margin:0}.mxi-09-18{padding:5px}.mxi-09-ee{height:28px;line-height:28px;margin:0 0 0 5px;padding:0}.mxi-09-94{color:#bbb}.mxi-09-61{margin-right:3px}.mxi-09-fl{float:left}.mxi-09-fr{float:right}.mxi-09-cp{cursor:pointer}.mxi-09-p8{padding:8px}.mxi-09-bc{color:red}.mxi-09-c8:after,.mxi-09-c8:before{content:"";display:table}.mxi-09-c8:after{clear:both}.mxi-09-c8{*zoom:1}.mxi-09-d8{height:1px;border:0;padding:0;margin:5px;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,hsla(270,6%,49%,.33)),to(rgba(165,69,243,0)))}#mx_manager_moreinfo,#mx_moreinfo{position:absolute;background-color:#eee;padding:8px;width:440px;display:none;box-shadow:0 2px 2px 2px #b9b9b9;word-break:break-all}.mxi-09-3d:before{left:4px;bottom:5px}.mxi-09-3d:after,.mxi-09-3d:before{content:" ";position:absolute;top:10px;border:2px dotted #b9b1b1;height:10px;cursor:move}.mxi-09-3d:after{left:9px}');var c={log:function(t,a){var i=e.getElementById("mx_trancer");if(c.idle){var n=e.createElement("hr");n.className="mxi-09-d8",i.insertBefore(n,i.firstChild),delete c.idle}var r=e.createElement("div");r.innerHTML=t,a&&(r.style.color=a),i.insertBefore(r,i.firstChild),i.getElementsByTagName("div").length>200&&(i.removeChild(i.lastChild),i.removeChild(i.lastChild)),clearTimeout(c.$timer),c.$timer=setTimeout(function(){c.idle=!0},1500)}},d={captureItmes:function(){var e=d;e.list=[],delete e.$last,l.onMousemove=function(t){var a,i;if(e.$last?(i=e.$last,Math.pow(Math.pow(i.center.x-t.x,2)+Math.pow(i.center.y-t.y,2),.5)>i.radius&&(e.onHoverItem({item:i,action:"leave"}),delete e.$last,a=!0)):a=!0,a)for(var n=e.list.length-1;n>=0;n--)if(i=e.list[n],Math.pow(Math.pow(i.center.x-t.x,2)+Math.pow(i.center.y-t.y,2),.5)<=i.radius){e.$last!=i&&(e.$last=i,e.onHoverItem({item:i,action:"enter"}));break}}},captureManagerItmes:function(){var e=d;e.managerList=[],delete e.$managerLast,l.onManagerMousemove=function(t){var a,i,n;if(e.$managerLast?(n=(i=e.$managerLast).rect,(t.x<n[0]||t.y<n[1]||t.x>n[0]+n[2]||t.y>n[1]+n[3])&&(e.onHoverManagerItem({item:i,action:"leave"}),delete e.$managerLast,a=!0)):a=!0,a)for(var r=e.managerList.length-1;r>=0;r--)n=(i=e.managerList[r]).rect,t.x>=n[0]&&t.y>=n[1]&&t.x<=n[0]+n[2]&&t.y<=n[1]+n[3]&&e.$managerLast!=i&&(e.$managerLast=i,e.onHoverManagerItem({item:i,action:"enter"}))}},getBestParams:function(e,t,a){var n=0,r=0,o={},s=function(e,t){e.deep=t,t>r&&(r=t),o[t]||(o[t]=0),e.leftCount=o[t],o[t]++,o[t]>n&&(n=o[t]);for(var a=0;a<e.children.length;a++)e.children[a],s(e.children[a],e.deep+1)};e.deepMap=o,s(e,1,0);var c=t/(n=Math.max(n,e.isolated.length+1))-i.circleMargin,d=a/r-i.circleMargin,m=t,g=2*i.minCircleRadius;c<g?(c=g,(m=g*n+(n+1)*i.circleMargin)>3e4&&(m=3e4),l.updateVOMCanvansWidth(m)):l.updateVOMCanvansWidth(m);var u=Math.floor(Math.min(d,c)/2),h=(u/20).toFixed(1);return{width:m,margin:i.circleMargin,radius:u,band:h}},drawTree:function(t,r){if(t.id){var o=i.width,s=i.canvasHeight,c=d;c.captureItmes();var m=c.getBestParams(t,o,s);o=m.width;var g=e.getElementById("mx_view_canvas").getContext("2d");g.clearRect(0,0,o,s);var u=2*m.radius-2*(m.band+1)-1;c.$tWidth||(c.$tWidth={});var h=function(e){return c.$tWidth[e]||(g.font="normal 12px Arial",c.$tWidth[e]=g.measureText(e).width),c.$tWidth[e]},f=function(e){for(var t=1,a=0;t<=e.length;){if(!((a+=h(e.substring(t-1,t)))<u))return e.substring(0,t-3)+"..";t+=1}return e},v=0,p=function(e,a,i,r){if(i){g.beginPath();var s=180*Math.atan((a.y-i.y)/(a.x-i.x))/Math.PI;s<0&&(s+=180);var l=Math.round(i.x+m.radius*Math.cos(s*Math.PI/180)),c=Math.round(i.y+m.radius*Math.sin(s*Math.PI/180));g.moveTo(l,c),g.lineTo(a.x,a.y),g.lineWidth=m.band/1.5,g.strokeStyle=r,g.stroke()}var d=t.deepMap[e.deep+1];if(d)for(var u=(o-(d*m.radius*2+(d-1)*m.margin))/2,h="#"+n[v++%n.length],f=0,x=void 0;f<e.children.length;f++)x=e.children[f],p(x,{x:u+x.leftCount*(2*m.radius+m.margin)+m.radius,y:a.y+m.margin+2*m.radius},a,h)},x=function(e,i){g.moveTo(i.x,i.y),g.beginPath(),g.arc(i.x,i.y,m.radius,0,2*Math.PI,!0),g.fillStyle=e.status,e.id==r&&(e.flag?g.fillStyle=a.active:g.fillStyle=e.status,e.flag=!e.flag),g.fill();var n=Math.max(.5,m.radius/10),s=i.y+m.radius/2,l=i.x-m.radius/2+n;if(e.event&&(g.beginPath(),g.arc(l,s,n,0,2*Math.PI,!0),g.fillStyle=e.event,g.fill()),e.location&&(g.beginPath(),g.arc(i.x,s+n,n,0,2*Math.PI,!0),g.fillStyle=e.location,g.fill()),e.mixins){var d=s,u=s+n,h=((b=l)+(_=i.x)+Math.sqrt(3)*(u-d))/2-(_-b)/10,v=(d+u-Math.sqrt(3)*(_-b))/2+(_-b)/3;g.beginPath(),g.arc(h,v,n,0,2*Math.PI,!0),g.fillStyle=e.mixins,g.fill()}if(e.shared){var p=i.x+m.radius/2-n;g.beginPath(),g.arc(p,s,n,0,2*Math.PI,!0),g.fillStyle=e.shared,g.fill()}if(e.state){var d=s+n,u=s,h=((b=i.x)+(_=i.x+m.radius/2-n)+Math.sqrt(3)*(u-d))/2+(_-b)/10,v=(d+u-Math.sqrt(3)*(_-b))/2+(_-b)/3;g.beginPath(),g.arc(h,v,n,0,2*Math.PI,!0),g.fillStyle=e.state,g.fill()}if(e.inline){g.beginPath();var M=m.radius-m.band-1,w=-2*Math.PI/360*60,y=-2*Math.PI/360*120,b=i.x+M*Math.cos(w),d=i.y+M*Math.sin(w),_=i.x+M*Math.cos(y),u=i.y+M*Math.sin(y);g.moveTo(b,d),g.quadraticCurveTo(i.x,i.y-M/2,_,u),g.moveTo(b,d),g.quadraticCurveTo(i.x,i.y-m.radius-m.band,_,u),g.fillStyle="#fff",g.fill()}g.moveTo(i.x,i.y),g.beginPath(),g.arc(i.x,i.y,m.radius-m.band-1,0,2*Math.PI,!0),g.lineWidth=m.band,g.strokeStyle="#fff",g.stroke(),c.list.push({id:e.id,center:i,il:e.il,radius:m.radius}),g.beginPath(),g.moveTo(i.x,i.y),g.font="normal 12px Arial",g.fillStyle="#eee";var I=f(e.id),$=Math.round(g.measureText(I).width),T=(2*m.radius-$)/2;g.fillText(I,i.x+T-m.radius,i.y+4);var C=t.deepMap[e.deep+1];if(C)for(var k=(o-(C*m.radius*2+(C-1)*m.margin))/2,E=0,S=void 0;E<e.children.length;E++)S=e.children[E],x(S,{x:k+S.leftCount*(2*m.radius+m.margin)+m.radius,y:i.y+m.margin+2*m.radius})},M=t.isolated,w=o/2;if(M.length){w=(o-(M.length+1)*m.radius*2+M.length*m.margin)/2;for(var y=0;y<M.length;y++)x(M[y],{x:w+(y+1)*(2*m.radius+m.margin)+m.radius,y:m.margin+m.radius});w+=m.radius}p(t,{x:w,y:m.margin+m.radius}),x(t,{x:w,y:m.margin+m.radius}),l.showTotal(t,m)}},drawManagerTree:function(t){var a=d;a.captureManagerItmes();var r=i.managerMargin*(t.rows+1)+t.rows*i.managerHeight+(i.managerGroupSpace+i.managerMargin)*t.groups.length;l.updateManagerCanvasHeight(r);var o=e.getElementById("mx_manager_canvas").getContext("2d");o.clearRect(0,0,i.canvasWidth,r);var s=i.managerMargin,c=(i.canvasWidth-(1+i.managerCols)*i.managerMargin)/i.managerCols|0,m=(o.font="normal 14px Arial",o.measureText("M").width),g=function(e,t,i,n){e.beginPath(),e.moveTo(t[0],t[1]),e.fillStyle=i.color,e.fillRect(t[0],t[1],t[2],t[3]),e.beginPath(),e.moveTo(t[0],t[1]+10),e.font="normal 14px Arial",e.fillStyle="#282828";for(var r,o=i.id;(o.length-3)*m>t[2];)o=o.slice(0,-1),r=!0;r&&(o=o.slice(0,-3)+"..."),e.fillText(o,t[0]+5,t[1]+25),i.package=n,i.rect=t,a.managerList.push(i)};!function(e){for(var t=0;t<e.length;t++){var a=e[t],r=i.managerMargin,l=!1;o.beginPath(),o.moveTo(r,s),o.font="normal 14px Arial",o.fillStyle="#282828",o.fillText(a.name,r+5,s+25),s+=i.managerGroupSpace;var d=void 0,m=void 0,u=Math.max(a.maxLeft,a.maxRight),h={},f=0,v=(u-a.maxLeft)/2*(i.managerHeight+i.managerMargin),p=(u-a.maxRight)/2*(i.managerHeight+i.managerMargin);for(d=0;d<u;d++){var x=a.cleans.left[d],M=a.cleans.right[d];x&&(g(o,[r,s+v,150,i.managerHeight],x,a.name),h[x.id]=x),M&&(g(o,[i.canvasWidth-i.managerMargin-150,s+p,150,i.managerHeight],M,a.name),h[M.id]=M,M.lineColor=n[f++%n.length]),s+=i.managerMargin+i.managerHeight}for(var w in h)if((m=h[w]).cleans)for(var y={x:m.rect[0]+m.rect[2],y:m.rect[1]+(m.rect[3]/2|0)},b=(m.cleans+"").split(","),_=b.length-1;_>=0;_--){var I=h[b[_]],$={x:I.rect[0],y:I.rect[1]+(I.rect[3]/2|0)};o.beginPath(),o.moveTo(y.x,y.y),o.lineTo($.x,$.y),o.lineWidth=1,o.strokeStyle="#"+(I.lineColor||"996699"),o.stroke()}for(d=0;d<a.caches.length;d++)g(o,[r,s,c,i.managerHeight],a.caches[d],a.name),(d+1)%i.managerCols==0?(r=i.managerMargin,s+=i.managerMargin+i.managerHeight,l=!1):(r+=c+i.managerMargin,l=!0);for(r=i.managerMargin,l&&(s+=i.managerMargin+i.managerHeight),d=0;d<a.items.length;d++)m=a.items[d],g(o,[r,s,c,i.managerHeight],m,a.name),(d+1)%i.managerCols==0?(r=i.managerMargin,s+=i.managerMargin+i.managerHeight,l=!1):(r+=c+i.managerMargin,l=!0);r=i.managerMargin,l&&(s+=i.managerGroupSpace)}}(t.groups),l.showManagerTotal(t)},onHoverItem:function(e){var t=w.getEnv().getVOM();"enter"==e.action?l.showMoreInfo(t.get(e.item.id),e.item):l.hideMoreInfo()},onHoverManagerItem:function(e){"enter"==e.action?l.showManagerMoreInfo(e.item):l.hideManagerMoreInfo()}},m={$:["zepto","fn.jquery"],jquery:["fn.jquery"],zepto:["zepto"],magix:["safeExec","toTry"]},g={},u=window.KISSY,h={prepare:function(){u.use("node")},getRootId:function(){return(u.Env.mods["magix/magix"]?u.require("magix/magix"):u.require("magix")).config("rootId")},getVOM:function(){if(u.Env.mods["magix/magix"])return u.require("magix/vom");var e=u.require("magix");return e.VOM||e.Vframe},getMangerMods:function(){var e=u.Env.mods,t=[];for(var a in e){var i=e[a].exports||e[a].value;i&&(i.$mMetas&&i.$mCache||i.$mm&&i.$mc||i.$m&&i.$c)&&t.push({name:e[a].name,exports:i})}return t},isReady:function(){var e=u.Env.mods["magix/magix"],t=u.Env.mods.node;if(e){var a=u.Env.mods["magix/vom"];return e.status===u.Loader.Status.ATTACHED&&a&&a.status===u.Loader.Status.ATTACHED&&t&&t.status===u.Loader.Status.ATTACHED}try{return(e=u.require("magix"))&&e.toTry&&t&&t.status===u.Loader.Status.ATTACHED}catch(e){return!1}},updateDOMStyle:function(e,t){var a=u.require("node").one("#"+t);if(a){var i,n=a,r={height:n.outerHeight?n.outerHeight():n.height(),width:n.outerWidth?n.outerWidth():n.width()};if(r.height)i=n.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",r.width=Math.max(r.width,n.children().width()||0),n;else{var o=4;do{if(n=n.children(),r.height=n.height(),n,r.height){var s=n.css("position");"fixed"==s?(s=n.css("left"),e.left=s,e.position=s,s=n.css("top"),e.top=s,s=n.css("right"),e.right=s,s=n.css("bottom"),e.bottom=s):(i=n.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",r.width=Math.max(r.width,n.children().width()||0));break}o--}while(n.length&&!r.height&&o>=0)}var l,c=-1;do{l||(l="none"==a.css("display"));var d=parseInt(a.css("z-index"))||1;d&&d>c&&(c=d),a=a.parent()}while(a);l&&(r={width:0,height:0}),1==c&&(c=2147483640),e.zIndex=c+1,e.width=r.width+"px",e.height=r.height+"px"}},getDOMOffset:function(e){return u.require("node").one("#"+e).offset()},bind:function(e,t,a){var i=u.require("node");return u.isString(e)&&(e="#"+e),i.one(e).on(t,a)},unbind:function(e,t,a){var i=u.require("node");return u.isString(e)&&(e="#"+e),i.one(e).detach(t,a)},getMixinId:function(e){for(var t=u.Env.mods,a=[],i=0;i<e.length;i++){var n=e[i];if(n)if(n["\x1e"])a.push('<span style="color:#C71585">State.clean("'+n["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if((o.exports||o.value)==n){a.push(r);break}}a.length<=i&&a.push("unknown")}return a},getResType:function(e){var t="",a=e.res||e.e;if(a)if(a.all&&a.constructor&&a.constructor.cached)t="Magix.Service";else if(a.fetchAll||a.all&&a.one&&a.next&&a.then)t="Model Manager";else if(a.bricks)t="Pagelet";else if(a.__attrs&&a.__attrVals&&a.constructor){var i=u.Env.mods,n=void 0;for(var r in i){var o=i[r],s=o.value||o.exports;if(s&&a.constructor==s){t=o.name,n=!0;break}}n||(t=a.hasOwnProperty("pagelet")?"Brick":"extend S Attribute")}else t=u.isFunction(a)?"\u51fd\u6570\u6216\u6784\u9020\u5668":u.type(a);else t=u.type(a);return t},hookAttachMod:function(e){var t=u.Loader.Utils.attachMod;u.Loader.Utils.attachMod=function(){t.apply(u.Loader.Utils,arguments),e()}},dragIt:function(e,t){var a=u.one(e),i=s.get(u.one,"detach",u.isFunction);u.one(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var n=parseInt(a.css("right"),10),r=parseInt(a.css("top"),10),o=e.pageX,s=e.pageY;i.begin(e.target,function(e){i.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),a.css({right:n-t,top:r+l})})}})},drawIcons:function(e){for(var t=e.length-1;t>=0;t--){var a=e[t],i=u.one("#"+a.id);i&&i.removeClass("mxi-09-65").removeClass("mxi-09-d2").addClass("mxi-09-a9"),a.cls&&i&&i.addClass(o[a.cls])}},getNode:function(e){return u.one(e)},hookViewShare:function(e){var t=u.Env.mods.magix;if(t&&(t=u.require("magix"))&&t.View&&t.View.prototype.share){var a=t.View.prototype.share;t.View.prototype.share=function(){a.apply(this,arguments),e()}}}},f={prepare:function(){},hookAttachMod:function(e){if(window.MutationObserver){new window.MutationObserver(function(){clearTimeout(void 0),setTimeout(e,1e3)}).observe(document.body,{subtree:!0,childList:!0,characterData:!0})}},getMod:function(e){var t=require.s.contexts._.defined,a=t[e]||g[e];if(!a&&m[e]){var i=m[e];for(var n in t){for(var r=!1,o=i.length-1;o>=0;o--){for(var s=i[o].split("."),l=t[n];s.length&&l;)l=l[s.shift()];if(l){r=!0;break}}if(r){a=t[n],g[e]=a;break}}}return a},getDL:function(){return this.getMod("$")||this.getMod("jquery")||this.getMod("zepto")},getRootId:function(){var e=this.getMod("magix/magix");return(e||this.getMod("magix")).config("rootId")},getVOM:function(){var e=this.getMod("magix/vom");if(e)return e;var t=this.getMod("magix");return t.VOM||t.Vframe},getMangerMods:function(){var e=require.s.contexts._.defined,t=[];for(var a in e){var i=e[a];i&&(i.$mMetas&&i.$mCache||i.$mm&&i.$mc||i.$m&&i.$c)&&t.push({name:a,exports:i})}return t},isReady:function(){return this.getMod("magix/magix")||this.getMod("magix")},updateDOMStyle:function(e,t){var a,i=this.getDL(),n=i("#"+t),r=n,o={height:r.outerHeight?r.outerHeight():r.height(),width:r.outerWidth?r.outerWidth():r.width()};if(o.height)a=r.offset(),e.left=a.left+"px",e.top=a.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0),r;else{var s=4;do{if(r=r.children(),o.height=r.height(),r,o.height){var l=r.css("position");"fixed"==l?(l=r.css("left"),e.left=l,e.position=l,l=r.css("top"),e.top=l,l=r.css("right"),e.right=l,l=r.css("bottom"),e.bottom=l):(a=r.offset(),e.left=a.left+"px",e.top=a.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0));break}s--}while(r.length&&!o.height&&s>=0)}var c,d=-1;do{c||(c="none"==n.css("display"));var m=parseInt(n.css("z-index"))||1;m&&m>d&&(d=m),n=n.parent()}while(n.length&&i.contains(document.body,n[0]));c&&(o={width:0,height:0}),1==d&&(d=2147483640),e.zIndex=d+1,e.width=o.width+"px",e.height=o.height+"px"},getDOMOffset:function(e){return this.getDL()("#"+e).offset()},bind:function(e,t,a){var i=this.getDL();return"string"==i.type(e)&&(e="#"+e),i(e).on(t,a)},unbind:function(e,t,a){var i=this.getDL();return"string"==i.type(e)&&(e="#"+e),i(e).off(t,a)},getMixinId:function(e){for(var t=require.s.contexts._.defined,a=[],i=0;i<e.length;i++){var n=e[i];if(n)if(n["\x1e"])a.push('<span style="color:#C71585">State.clean("'+n["\x1e"]+'")</span>');else for(var r in t)if(t[r]==n){a.push(r);break}a.length<=i&&a.push("unknown")}return a},getResType:function(e){var t=e.res||e.e,a=this.getDL(),i=a.type(e);return t&&(t.all&&t.constructor&&t.constructor.cached?i="Magix.Service":t.fetchAll||t.all&&t.one&&t.next&&t.then?i="Model Manager":t.bricks?i="Pagelet":a.isFunction(t)&&(i="\u51fd\u6570\u6216\u6784\u9020\u5668")),i},dragIt:function(e,t){var a=this.getDL(),i=a(e),n=s.get(a,"off",a.isFunction);a(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var a=parseInt(i.css("right"),10),r=parseInt(i.css("top"),10),o=e.pageX,s=e.pageY;n.begin(e.target,function(e){n.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),i.css({right:a-t,top:r+l})})}})},drawIcons:function(e){for(var t=this.getDL(),a=e.length-1;a>=0;a--){var i=e[a],n=t("#"+i.id);n&&n.removeClass("mxi-09-65").removeClass("mxi-09-d2").addClass("mxi-09-a9"),i.cls&&n&&n.addClass(o[i.cls])}},getNode:function(e){return this.getDL()(e)},hookViewShare:function(e){var t=this.getMod("magix");if(t&&t.View&&t.View.prototype.share){var a=t.View.prototype.share;t.View.prototype.share=function(){a.apply(this,arguments),e()}}}},v={},p={},x={};for(var M in f)v[M]=p[M]=x[M]=f[M];v.getMod=function(e){var t=seajs.cache,a=g[e];if(!a)for(var i in t){var n=t[i];if(n.id===e)return n.exports}if(!a&&m[e]){var r=m[e];for(var i in t){for(var o=!1,s=r.length-1;s>=0;s--){for(var l=r[s].split("."),c=t[i].exports;l.length&&c;)c=c[l.shift()];if(c){o=!0;break}}if(o){a=t[i].exports,g[e]=a;break}}}return a},v.getMangerMods=function(){var e=seajs.cache,t=[];for(var a in e){var i=e[a],n=i.exports;n&&n.$m&&n.$s&&t.push({name:i.id,exports:n})}return t},v.getMixinId=function(e){for(var t=seajs.cache,a=[],i=0;i<e.length;i++){var n=e[i];if(n)if(n["\x1e"])a.push('<span style="color:#C71585">State.clean("'+n["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if(o.exports==n){a.push(o.id);break}}a.length<=i&&a.push("unknown")}return a},p.getMod=function(e){var t;try{t=require(e)}catch(e){}return t||window.console.warn("seajs standalone\u6a21\u5f0f\u4e0b\u65e0\u6cd5\u627e\u5230\u6a21\u5757\uff1a"+e+"\uff0c\u4e5f\u65e0\u6cd5\u667a\u80fd\u63a2\u6d4b\u3002\u5982\u9700\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217"),t},p.getMangerMods=function(){return[]},p.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},x.getMod=function(e,t){if("magix"==key)return window.Magix},x.getDL=function(){return window.$||window.jQuery},x.getRootId=function(){return Magix.config("rootId")},x.getVOM=function(){return Magix.VOM||Magix.Vframe},x.getMangerMods=function(){return[]},x.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},x.isReady=function(){return!0};var w={getEnv:function(){return window.KISSY?h:window.requirejs?f:window.seajs?v:window.define&&window.require?p:window.Magix?x:void window.console.error("getEnvError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217")},getEvents:function(e){var t=[],a=0;if(e){var i=e.view&&(e.view.events||e.view.$evts)||e.$v&&e.$v.$eo,r=[],o=[];for(var s in i){a++;var l=i[s];isFinite(l)?(1==(1&l)&&r.push(s),2==(2&l)&&o.push(s)):r.push(s)}var c=e.view&&e.view.tmplEvents;c&&c.length&&(r=r.concat(c),a+=c.length),r.length&&t.push("&lt;"+r+"&gt;");var d=e.$v&&e.$v.$el,m=[],g=[],u=[],h={};if(d){for(var f=0,v=void 0;f<d.length;f++)if(v=d[f],a++,v.e)v.e==window?m.push(v.n):v.e==document&&g.push(v.n);else{var p=h[v.s];p?p.push(v.n):h[v.s]=[v.n]}for(var s in h)u.push("$"+s+"&lt;"+h[s]+"&gt;")}var x=e.$v&&e.$v.$so;if(o.length){for(var M={},w=0,y=void 0,b=void 0;w<o.length;w++){y=x[b=o[w]];for(var _ in y){var I=M[_];I?I.push(b):M[_]=[b]}}for(var s in M)u.push("$"+s+"&lt;"+M[s]+"&gt;")}m.length&&t.push('<span style="color:#'+n[1]+'">$win&lt;'+m+"&gt;</span>"),g.length&&t.push('<span style="color:#'+n[3]+'">$doc&lt;'+g+"&gt;</span>"),u.length&&t.push('<span style="color:#'+n[4]+'">'+u+"</span>")}return{list:t,total:a}},getShared:function(e){var t=[];if(e&&e.$v){var a=e.$v.$sd;if(a)for(var i in a)t.push(i)}return t},getLocation:function(e){var t,a=[];if(e){if(e.view){var i=e.view.$ol;i&&(t=i.pn,a=i.keys||i.ks)}if(e.$v){var n=e.$v.$l;n&&n.f&&(t=n.p,a=n.k)}}return{path:t,keys:a}},getGradualColor:function(e,t){var a=i.gradualStartColor,n=i.gradualEndColor,r=(n.r-a.r)/t,o=(n.g-a.g)/t,s=(n.b-a.b)/t;return"#"+("0"+parseInt(a.r+e*r).toString(16)).slice(-2)+("0"+parseInt(a.g+e*o).toString(16)).slice(-2)+("0"+parseInt(a.b+e*s).toString(16)).slice(-2)},getIsInline:function(e){if(e){var t=e.view;if(t)return!t.template&&!t.tmpl;if(t=e.$v)return!t.tmpl}return!1},getMixins:function(e){if(e){var t=e.$v;if(t&&t.mixins)return t.mixins}return[]},getState:function(e){if(e){var t=e.$v;if(t&&t.$os)return t.$os}return[]},getTree:function(t){var n=t.getRootId(),r=t.getVOM(),o=[],s={},l={total:0,comTotal:0,vomTotal:0,children:[]},c=r.all(),d={},m=!1;for(var g in c)c.hasOwnProperty(g)&&l.vomTotal++,d[g]=1;var u=function(e,t){var n=r.get(e),c={};if(n){l.total++,t.id=n.id,c.id=n.id,delete d[n.id],n.fcc||n.$cr?(t.status=a.created,c.cls=""):n.fca||n.$ca?(t.status=a.alter,c.cls="alter",(n.cM&&!n.view||n.$c&&!n.$v)&&(t.status=a.init,c.cls="bad")):(t.status=a.init,c.cls="bad"),o.push(c),s[n.id]=t;var g=w.getEvents(n).total;if(g){var h=i.eventsCommonCount;g=Math.min(g,h),t.event=w.getGradualColor(g,h)}var f=w.getShared(n);if(f.length){var v=i.sharedCount,p=Math.min(f.length,v);t.shared=w.getGradualColor(p,v)}var x=w.getLocation(n);if(x.path||x.keys&&x.keys.length){var M=i.locationCount,y=x.keys||[],p=Math.min(M,y.length);t.location=w.getGradualColor(p,M)}var b=w.getMixins(n);if(b.length){var _=i.mixinsCount,p=Math.min(b.length,_);t.mixins=w.getGradualColor(p,_)}var I=w.getState(n);if(I.length){var v=i.stateCount,p=Math.min(I.length,v);t.state=w.getGradualColor(p,v)}t.inline=w.getIsInline(n);var $=n.path;(t.inline||$&&$.indexOf("/gallery/")>0)&&(m=!0,t.component=!0,l.comTotal++);var T=n.cM||n.$c;for(var C in T){var k={children:[]};u(C,k),k.id&&t.children.push(k)}}};u(n,l);var h=e.getElementById("mx_com_view");h&&h.checked||!m||(m=function(e){for(var t=e.children.length-1;t>=0;t--){var a=e.children[t];a.component?e.children.splice(t,1):m(a)}})(l);var f=[];for(var v in d)f.push({id:v,il:!0,status:a.isolated,children:[]}),o.push({id:v,cls:"bad"});return l.isolated=f,{tree:l,flattened:o,map:s}},getManagerTree:function(e){for(var t=e.getMangerMods(),a=[],n=0,o={},s=0,l={},c=0,d=0;d<t.length;d++){var m=t[d],g=m.exports.$mMetas||m.exports.$mm||m.exports.$m;g._$id||(g._$id="t"+c++),l[g._$id]&&(l[g._$id].continued=!0),l[g._$id]=m}for(var u=0;u<t.length;u++){var h=t[u],f=[],v={left:[],right:[]},p=[],x=0,M=0,w=0,y=void 0,b=void 0,_=h.exports.$mMetas||h.exports.$mm||h.exports.$m;if(delete _._$id,!h.continued){for(y in _)if((b=_[y]).cleans)for(var I=(b.cleans+"").split(","),$=0;$<I.length;$++)o[I[$]]=y;for(y in _){b=_[y];var T=r.normal,C={id:y,color:T,url:b.url||b.uri,cache:(b.cache||0|b.cacheTime)/1e3+"sec",desc:b.desc||"",cleans:b.cleans||"",cleaned:o[y]||"",hasAfter:b.after?(b.after+"").substr(0,200):""};b.cleans?(T=r.cleans,C.color=T,v.left.push(C),M++):o[y]?(T=r.cleaned,C.color=T,v.right.push(C),w++):b.cache||b.cacheTime?(T=r.cache,C.color=T,p.push(C)):(f.push(C),x++),s++}}n+=Math.ceil(x/i.managerCols),n+=Math.max(M,w),n+=Math.ceil(p.length/i.managerCols),a.push({name:h.name,rows:n,cleans:v,caches:p,maxLeft:M,maxRight:w,items:f})}return{groups:a,rows:n,total:s}},prepare:function(t){var a=w.getEnv();a.prepare();var i=50,n=function(){--i?e.body&&a.isReady()?t():setTimeout(n,500):window.console.error("prepareError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector(\u9700\u8981\u7684\u6a21\u5757\u5982jquery,magix\u7b49\u68c0\u6d4b\u4e0d\u5230)\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u65fa\u65fa\u8054\u7cfb\uff1a\u884c\u5217")};n()},start:function(){w.prepare(function(){l.setup();var e,t,i,n,r,o=w.getEnv(),s=o.getVOM(),m=0,g=function(){n&&t&&(m=0,d.drawTree(r.tree),clearInterval(t),n=t="")},u=function(){m=16,n&&!t&&(d.drawTree(r.tree,n),t=setInterval(function(){m?(m--,d.drawTree(r.tree,n)):g()},600))};document.onmouseout=document.onmouseover=function(e){clearTimeout(i),i=setTimeout(function(){for(var t,a=s.all(),i="mouseout"==e.type?e.relatedTarget:e.target;i&&i.parentNode;){var r=i.id;if(r&&a[r]){t=r;break}i=i.parentNode}t?t!=n&&(n=t,u()):g()},50)};var h=function(e){e.on("created",function(){c.log("vframe:"+e.id+"["+(e.path||e.view.path||"")+"]\u6e32\u67d3\u5b8c\u6bd5",a.created),v()}),e.on("alter",function(t){if(t.id&&!t.logged){t.logged=1;var i=s.get(t.id);i&&c.log("\u4ecevframe:"+i.id+"["+(i.path||i.view.path||"")+"] \u53d1\u8d77\u754c\u9762\u53d8\u66f4",a.build)}c.log("vframe:"+e.id+"\u6536\u5230\u53d8\u66f4\u6d88\u606f",a.alter),v()}),e.on("viewInited",function(){c.log("vframe:"+e.id+"\u7684view["+e.view.path+"]\uff0cinit\u8c03\u7528\u5b8c\u6bd5",a.created)}),e.on("viewUnmounted",function(){var t=e.path||e.view&&e.view.path||"";t&&(t="["+t+"]"),c.log("vframe:"+e.id+"\u7684view"+t+"\u9500\u6bc1\u5b8c\u6bd5",a.destroy)}),e.on("viewMounted",function(){c.log("vframe:"+e.id+"\u7684view["+(e.path||e.view.path||"")+"]\uff0c\u9996\u6b21\u6e32\u67d3\u5b8c\u6bd5",a.created)}),e.___mh=!0},f=function(){var e=s.all();for(var t in e){var a=s.get(t);a.___mh||h(a)}},v=function(t){if(t)if("remove"==t.type)if(t.vframe){var i=t.vframe.path;!i&&t.vframe.view&&(i=t.vframe.view.path),i=i?"("+i+")":"",c.log("\u4eceVOM\u4e2d\u79fb\u9664vframe:"+t.vframe.id+i,a.remove)}else c.log("remove:",t);else"created"==t.type&&f();clearTimeout(e),e=setTimeout(function(){g(),r=w.getTree(o),d.drawTree(r.tree),u(),o.drawIcons(r.flattened)},0)};s.on("add",function(e){v(),e.vframe.pId&&c.log("\u627e\u5230vframe:"+e.vframe.pId+"\u7684\u5b50vframe:"+e.vframe.id,a.build),c.log("\u521b\u5efavframe:"+e.vframe.id,a.build),h(e.vframe)}),s.on("remove",v);var p=s.get(o.getRootId());p&&p.on("created",v),f(),v(),w.drawTree=v;var x,M=function(){clearTimeout(x),x=setTimeout(function(){var e=w.getManagerTree(o);d.drawManagerTree(e)},500)};o.hookAttachMod(M),o.hookViewShare(v),M()})}};w.start()}}();