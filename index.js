/*!1.2.7 kooboy_li@163.com*/!function(){var e=document,t=window;if(e.___)t.postMessage({__a:"mx_ispt",__b:"expand"},"*");else{t.addEventListener("message",function(e){var t=e.data;t&&"mx_ispt"==t.__a&&"expand"==t.__b&&d.__c()},!1),e.___=1;var i={__n:"#008B00",__p:"#FF3030",__o:"#BC8F8F",__v:"#FF3030",__G:"#9AC0CD",__H:"#8B5F65",__I:"#EED5B7",__L:"#94d694"},n={__M:550,__N:470,__O:530,__P:400,__Q:490,__R:34,__S:6,__T:15,__B:5,__U:5,__V:40,__W:40,__h:{r:0,g:153,b:102},__i:{r:255,g:255,b:0},__q:15,__r:5,__s:12,__t:5,__u:12},a=["FFC125","C71585","CDBA96","FF7F00","BA55D3","8B4726","7CFC00","4A4A4A","EE7AE9"],r={__A:"#CC9966",__z:"#99CCCC",__y:"#FF9999",__x:"#CCCC99"},o={alter:"mxi-b",bad:"mxi-a"},s={get:function(e,t,i){var n,a=e(window),r=e(document),o=function(e){(e=window.getSelection)?e().removeAllRanges():(e=window.document.selection)&&(e.empty?e.empty():e=null)},s=function(e){e.preventDefault()},l=function(e){n.iMove&&n.move(e)},c=function(i){if(n){r[t]("mousemove touchmove",l)[t]("mouseup touchend",c)[t]("keydown mousewheel DOMMouseScroll",s),a[t]("blur",c);var o=n.node;e(o)[t]("losecapture",c),o.setCapture&&o.releaseCapture(),n.iStop&&n.stop(i),n=null}};return{begin:function(t,_,d){c(),t&&(o(),t.setCapture&&t.setCapture(),n={move:_,stop:d,node:t,iMove:i(_),iStop:i(d)},r.on("mousemove touchmove",l).on("mouseup touchend",c).on("keydown mousewheel DOMMouseScroll",s),a.on("blur",c),e(t).on("losecapture",c))},clear:o,end:c}}},l=/[&<>]/g,c={"&":"amp","<":"lt",">":"gt"},_=function(e){return e.replace(l,function(e){return"&"+c[e]+";"})},d={__E:function(){var t=e.createElement("div");t.innerHTML='<div class="mxi-e" id="mx"><ul class="mxi-p mxi-d" id="mx_tabs"><li class="mxi-l mxi-n mxi-m" id="mx_min">\u25b3</li><li class="mxi-k mxi-n mxi-m">VOM</li><li class="mxi-k mxi-n mxi-m">Tracer</li><li class="mxi-k mxi-n mxi-m">Manager</li></ul><div id="mx_painter"><div style="width:{@{__M}}px;height:{__P}px;overflow-x:auto;overflow-y:hidden" id="mx_view_cnt"><canvas width="{__M}" height="{__P}" id="mx_view_canvas"></canvas></div><label class="mxi-k mxi-h"><input type="checkbox" class="mxi-j" id="mx_log_console">\u63a7\u5236\u53f0\u663e\u793aview\u4fe1\u606f</label><label class="mxi-k mxi-h"><input type="checkbox" class="mxi-j" id="mx_com_view" checked="checked">\u663e\u793a\u7ec4\u4ef6view</label><ul class="mxi-p mxi-k" id="mx_view_total"></ul></div><div id="mx_trancer" style="height:{__P}px;overflow:scroll;overflow-x:auto;display:none;padding:8px"></div><div id="mx_manager" style="display:none"><div style="height:{__P}px;overflow:scroll;overflow-x:auto" id="mx_manager_cnt"><canvas width="{__O}" height="{__P}" id="mx_manager_canvas"></canvas></div><ul class="mxi-p mxi-n" id="mx_manager_total"></ul></div><div id="mx_moreinfo"></div><div id="mx_manager_moreinfo"></div></div>'.replace(/\{(\w+)\}/g,function(e,t){return n[t]}),e.documentElement.appendChild(t),d.__X(),M.__d().dragIt("#mx","#mx_tabs")},__X:function(){d.__Y();var t,i=M.__d();i.bind("mx_view_canvas","mousemove",d.__Z=function(e){clearTimeout(t),t=setTimeout(function(){var t=i.getDOMOffset("mx_view_canvas");d.__a_({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),i.bind("mx_view_canvas","mouseout",d.__aa=function(){clearTimeout(t),d.__a_({x:-1,y:-1})}),i.bind("mx_manager_canvas","mousemove",d.__ab=function(e){clearTimeout(t),t=setTimeout(function(){var t=i.getDOMOffset("mx_manager_canvas");d.__ac({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),i.bind("mx_manager_canvas","mouseout",d.__ad=function(){clearTimeout(t),d.__ac({x:-1,y:-1})}),i.bind("mx_moreinfo","mouseover",d.__ae=function(){clearTimeout(d.__af)}),i.bind("mx_moreinfo","mouseout",d.__ag=function(){d.__ah()}),i.bind("mx_log_console","click",function(){e.getElementById("mx_log_console").checked&&window.console.dir(i.getVOM().all())}),i.bind("mx_com_view","click",function(){M.__J()}),i.bind("mx","click",d.__ai=function(t){var a;"mx_min"==t.target.id?(a=e.getElementById("mx"),"\u25b3"==t.target.innerHTML?(a.style.height=n.__R+"px",a.style.width="40px",a.style.overflow="hidden",t.target.innerHTML="\u25bd",i.getNode("#mx_tabs").addClass("mxi-r")):(a.style.height=n.__N+"px",a.style.width=n.__M+"px",a.style.overflow="inherit",t.target.innerHTML="\u25b3",i.getNode("#mx_tabs").removeClass("mxi-r"))):"VOM"==t.target.innerHTML?((a=e.getElementById("mx_painter")).style.display="block",(a=e.getElementById("mx_trancer")).style.display="none",(a=e.getElementById("mx_manager")).style.display="none"):"Tracer"==t.target.innerHTML?((a=e.getElementById("mx_painter")).style.display="none",(a=e.getElementById("mx_manager")).style.display="none",(a=e.getElementById("mx_trancer")).style.display="block"):"Manager"==t.target.innerHTML&&((a=e.getElementById("mx_painter")).style.display="none",(a=e.getElementById("mx_trancer")).style.display="none",(a=e.getElementById("mx_manager")).style.display="block")})},__c:function(){var t=e.getElementById("mx_min"),i=M.__d();if("\u25bd"==t.innerHTML){var a=e.getElementById("mx");a.style.height=n.__N+"px",a.style.width=n.__M+"px",a.style.overflow="inherit",t.innerHTML="\u25b3",i.getNode("#mx_tabs").removeClass("mxi-r")}},__Y:function(){var e=M.__d();e.unbind("mx_view_canvas","mousemove",d.__Z),e.unbind("mx_view_canvas","mouseout",d.__aa),e.unbind("mx_manager_canvas","mousemove",d.__aj),e.unbind("mx_manager_canvas","mouseout",d.__ad),e.unbind("mx_min","click",d.__ai),e.unbind("mx_moreinfo","mouseoout",d.__ag),e.unbind("mx_moreinfo","mouseover",d.__ae)},__ak:function(t,i){clearTimeout(d.__af),e.getElementById("mx_log_console").checked&&window.console.log(t);var a=e.getElementById("mx_cover");a||((a=e.createElement("div")).className="mxi-f",a.id="mx_cover",e.body.appendChild(a));var r=e.getElementById("mx_moreinfo");r.style.display="block";var o=i.center.x-n.__Q/2-e.getElementById("mx_view_cnt").scrollLeft;r.style.left=o+"px",r.style.top=i.center.y+i.radius+n.__R+5+"px";var s=M.__d();s.updateDOMStyle(a.style,t.id),a.style.display="block",r.innerHTML='<ul><li><b class="mxi-c">id:</b>{id}</li><li><b class="mxi-c">view:</b>{view}</li>{events} {location} {share} {mixins} {state}<li class="mxi-o">{ex}</li><li><b class="mxi-c">resources</b></li><li style="{moreInfoWidth}px;overflow:auto;max-height:200px">{res}</li></ul>'.replace(/\{(\w+)\}/g,function(e,a){switch(a){case"id":return i.id;case"view":if(t){if(t.$v||t.path)return _(t.path);if(t.view)return _(t.view.path)}return"";case"events":var r=M.__e(t);return r.total?'<li><b class="mxi-c">listen:</b>'+r.list+"</li>":"";case"share":var o=M.__f(t);return o.length?'<li><b class="mxi-c">share:</b>'+o+"</li>":"";case"location":var l=M.__g(t);if(l.path||l.keys&&l.keys.length){var c=[];return l.path&&c.push('<span style="color:#FFC125">path</span>'),l.keys&&(c=c.concat(l.keys)),'<li><b class="mxi-c">location:</b>'+c+"</li>"}return"";case"mixins":var d=M.__l(t);if(d.length){var u=s.getMixinId(d);return'<li><b class="mxi-c">mixins:</b>'+(u=u.join(","))+"</li>"}return"";case"state":var m=M.__m(t);return m.length?'<li><b class="mxi-c">state:</b>'+m.join(",")+"</li>":"";case"ex":if(i.il)return"\u88ab\u5b64\u7acb\u7684\u8282\u70b9\uff0c\u597d\u53ef\u601c\u2026\u2026";if(!t)return"vframe\u5df2\u88ab\u9500\u6bc1\uff0c\u4f46\u672a\u4ecevom\u4e2d\u79fb\u9664";if(t.path){if(t.cM&&!t.view||t.$c&&!t.$v)return"\u672a\u52a0\u8f7dview"}else if(!t.view)return"\u672a\u52a0\u8f7dview";if(t.cM){if(!t.fcc)return t.rC!=t.cC?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d"}else if(!t.$cr)return t.$rc!=t.$cc?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d";return t.fca||t.$ca?"\u7b49\u5f85view\u6e32\u67d3":"";case"res":var f=[],h=t&&t.view&&t.view.$res,v=void 0;if(h=h||t&&t.$v&&t.$v.$r){for(var g in h){v=!0;break}if(v){f.push('<table style="width:100%"><tr><td>key</td><td>type</td></tr>');for(var g in h)f.push("<tr><td>",g,"</td><td>",s.getResType(h[g]),"</td></tr>");f.push("</table>")}}return f.join("");default:return n[a]}})},__ah:function(){var t=e.getElementById("mx_moreinfo"),i=e.getElementById("mx_cover");d.__af=setTimeout(function(){t.style.display="none",i.style.display="none"},150)},__an:function(t){clearTimeout(d.__al);var i=e.getElementById("mx_manager_moreinfo");i.style.display="block",i.style.left=t.rect[0]+"px";var a=t.rect[1]+t.rect[3]+n.__R;a-=e.getElementById("mx_manager_cnt").scrollTop,i.style.top=a+"px",i.innerHTML=d.__am(/\{(\w+)\}/g,function(e,i){switch(i){case"id":return t.id;default:return t[i]}})},__ao:function(){var t=e.getElementById("mx_manager_moreinfo");d.__al=setTimeout(function(){t.style.display="none"},150)},__ap:function(t){e.getElementById("mx_manager_total").innerHTML='<li class="mxi-k mxi-g">{groups}\u4e2a\u63a5\u53e3\u6587\u4ef6\uff0c\u5171{total}\u4e2a\u63a5\u53e3</li>'.replace(/\{(\w+)\}/g,function(e,i){switch(i){case"groups":return t.groups.length;case"total":return t.total}})},__aq:function(t){e.getElementById("mx_view_total").innerHTML='<li class="mxi-k mxi-g mxi-i">view\u7edf\u8ba1:[{count}]</li>'.replace(/\{(\w+)\}/g,function(e,i){switch(i){case"count":return"com:"+t.comTotal+",vom:"+t.vomTotal+",total:"+t.total}})},__ar:function(t){e.getElementById("mx_manager_canvas").height=0|t},__as:function(t){var i=e.getElementById("mx_view_canvas");i.width=0|t,i.parentNode.scrollLeft=(i.width-n.__O)/2},__a_:function(e){},__ac:function(e){}};!function(e,t){var i=document.createElement("style");document.documentElement.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}(0,'vframe{display:block}.mxi-_:before{width:12px;content:"M";height:12px;border-radius:6px;position:absolute;background-color:#008b00;opacity:.4;font-size:10px;line-height:12px;text-align:center;color:#fff}.mxi-a:before{background-color:#ff3030}.mxi-b:before{background-color:#bc8f8f}.mxi-c{padding-right:5px}.mxi-d{background:#eee;cursor:move;margin:0;padding:0}.mxi-e{position:fixed;right:20px;top:20px;width:550px;height:470px;z-index:2147483647;-webkit-box-shadow:0 0 5px #b9b9b9;box-shadow:0 0 5px #b9b9b9;background-color:#fff;font-size:12px;line-height:1.5}.mxi-f{position:absolute;opacity:.7;background-color:#90ee90}.mxi-e ul{list-style:none;padding:0;margin:0}.mxi-g{padding:5px}.mxi-h{height:28px;line-height:28px;margin:0 0 0 5px;padding:0}.mxi-i{color:#bbb}.mxi-j{margin-right:3px}.mxi-k{float:left}.mxi-l{float:right}.mxi-m{cursor:pointer}.mxi-n{padding:8px}.mxi-o{color:red}.mxi-p:after,.mxi-p:before{content:"";display:table}.mxi-p:after{clear:both}.mxi-p{*zoom:1}.mxi-q{height:1px;border:0;padding:0;margin:5px;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,hsla(270,6%,49%,.33)),to(rgba(165,69,243,0)))}#mx_manager_moreinfo,#mx_moreinfo{position:absolute;background-color:#eee;padding:8px;width:440px;display:none;-webkit-box-shadow:0 2px 2px 2px #b9b9b9;box-shadow:0 2px 2px 2px #b9b9b9;word-break:break-all}.mxi-r:before{left:4px;bottom:5px}.mxi-r:after,.mxi-r:before{content:" ";position:absolute;top:10px;border:2px dotted #b9b1b1;height:10px;cursor:move}.mxi-r:after{left:9px}');var u={__F:function(t,i){var n=e.getElementById("mx_trancer");if(u.__at){var a=e.createElement("hr");a.className="mxi-q",n.insertBefore(a,n.firstChild),delete u.__at}var r=e.createElement("div");r.innerHTML=t,i&&(r.style.color=i),n.insertBefore(r,n.firstChild),n.getElementsByTagName("div").length>200&&(n.removeChild(n.lastChild),n.removeChild(n.lastChild)),clearTimeout(u.__au),u.__au=setTimeout(function(){u.__at=!0},1500)}},m={captureItmes:function(){var e=m;e.list=[],delete e.$last,d.__a_=function(t){var i,n;if(e.$last?(n=e.$last,Math.pow(Math.pow(n.center.x-t.x,2)+Math.pow(n.center.y-t.y,2),.5)>n.radius&&(e.onHoverItem({item:n,action:"leave"}),delete e.$last,i=!0)):i=!0,i)for(var a=e.list.length-1;a>=0;a--)if(n=e.list[a],Math.pow(Math.pow(n.center.x-t.x,2)+Math.pow(n.center.y-t.y,2),.5)<=n.radius){e.$last!=n&&(e.$last=n,e.onHoverItem({item:n,action:"enter"}));break}}},captureManagerItmes:function(){var e=m;e.managerList=[],delete e.$managerLast,d.__ac=function(t){var i,n,a;if(e.$managerLast?(a=(n=e.$managerLast).rect,(t.x<a[0]||t.y<a[1]||t.x>a[0]+a[2]||t.y>a[1]+a[3])&&(e.onHoverManagerItem({item:n,action:"leave"}),delete e.$managerLast,i=!0)):i=!0,i)for(var r=e.managerList.length-1;r>=0;r--)a=(n=e.managerList[r]).rect,t.x>=a[0]&&t.y>=a[1]&&t.x<=a[0]+a[2]&&t.y<=a[1]+a[3]&&e.$managerLast!=n&&(e.$managerLast=n,e.onHoverManagerItem({item:n,action:"enter"}))}},getBestParams:function(e,t,i){var a=0,r=0,o={},s=function(e,t){e.deep=t,t>r&&(r=t),o[t]||(o[t]=0),e.leftCount=o[t],o[t]++,o[t]>a&&(a=o[t]);for(var i=0;i<e.children.length;i++)e.children[i],s(e.children[i],e.deep+1)};e.deepMap=o,s(e,1,0);var l=t/(a=Math.max(a,e.isolated.length+1))-n.__S,c=i/r-n.__S,_=t,u=2*n.__T;l<u?(l=u,(_=u*a+(a+1)*n.__S)>3e4&&(_=3e4),d.__as(_)):d.__as(_);var m=Math.floor(Math.min(c,l)/2),f=(m/20).toFixed(1);return{width:_,margin:n.__S,radius:m,band:f}},drawTree:function(t,r){if(t.id){var o=n.__M,s=n.__P,l=m;l.captureItmes();var c=l.getBestParams(t,o,s);o=c.width;var _=e.getElementById("mx_view_canvas").getContext("2d");_.clearRect(0,0,o,s);var u=2*c.radius-2*(c.band+1)-1;l.$tWidth||(l.$tWidth={});var f=function(e){return l.$tWidth[e]||(_.font="normal 12px Arial",l.$tWidth[e]=_.measureText(e).width),l.$tWidth[e]},h=function(e){for(var t=1,i=0;t<=e.length;){if(!((i+=f(e.substring(t-1,t)))<u))return e.substring(0,t-3)+"..";t+=1}return e},v=0,g=function(e,i,n,r){if(n){_.beginPath();var s=180*Math.atan((i.y-n.y)/(i.x-n.x))/Math.PI;s<0&&(s+=180);var l=Math.round(n.x+c.radius*Math.cos(s*Math.PI/180)),d=Math.round(n.y+c.radius*Math.sin(s*Math.PI/180));_.moveTo(l,d),_.lineTo(i.x,i.y),_.lineWidth=c.band/1.5,_.strokeStyle=r,_.stroke()}var u=t.deepMap[e.deep+1];if(u)for(var m=(o-(u*c.radius*2+(u-1)*c.margin))/2,f="#"+a[v++%a.length],h=0,p=void 0;h<e.children.length;h++)p=e.children[h],g(p,{x:m+p.leftCount*(2*c.radius+c.margin)+c.radius,y:i.y+c.margin+2*c.radius},i,f)},p=function(e,n){_.moveTo(n.x,n.y),_.beginPath(),_.arc(n.x,n.y,c.radius,0,2*Math.PI,!0),_.fillStyle=e.status,e.id==r&&(e.flag?_.fillStyle=i.__L:_.fillStyle=e.status,e.flag=!e.flag),_.fill();var a=Math.max(.5,c.radius/10),s=n.y+c.radius/2,d=n.x-c.radius/2+a;if(e.event&&(_.beginPath(),_.arc(d,s,a,0,2*Math.PI,!0),_.fillStyle=e.event,_.fill()),e.location&&(_.beginPath(),_.arc(n.x,s+a,a,0,2*Math.PI,!0),_.fillStyle=e.location,_.fill()),e.mixins){var u=s,m=s+a,f=((b=d)+(M=n.x)+Math.sqrt(3)*(m-u))/2-(M-b)/10,v=(u+m-Math.sqrt(3)*(M-b))/2+(M-b)/3;_.beginPath(),_.arc(f,v,a,0,2*Math.PI,!0),_.fillStyle=e.mixins,_.fill()}if(e.shared){var g=n.x+c.radius/2-a;_.beginPath(),_.arc(g,s,a,0,2*Math.PI,!0),_.fillStyle=e.shared,_.fill()}if(e.state){var u=s+a,m=s,f=((b=n.x)+(M=n.x+c.radius/2-a)+Math.sqrt(3)*(m-u))/2+(M-b)/10,v=(u+m-Math.sqrt(3)*(M-b))/2+(M-b)/3;_.beginPath(),_.arc(f,v,a,0,2*Math.PI,!0),_.fillStyle=e.state,_.fill()}if(e.inline){_.beginPath();var x=c.radius-c.band-1,y=-2*Math.PI/360*60,w=-2*Math.PI/360*120,b=n.x+x*Math.cos(y),u=n.y+x*Math.sin(y),M=n.x+x*Math.cos(w),m=n.y+x*Math.sin(w);_.moveTo(b,u),_.quadraticCurveTo(n.x,n.y-x/2,M,m),_.moveTo(b,u),_.quadraticCurveTo(n.x,n.y-c.radius-c.band,M,m),_.fillStyle="#fff",_.fill()}_.moveTo(n.x,n.y),_.beginPath(),_.arc(n.x,n.y,c.radius-c.band-1,0,2*Math.PI,!0),_.lineWidth=c.band,_.strokeStyle="#fff",_.stroke(),l.list.push({id:e.id,center:n,il:e.il,radius:c.radius}),_.beginPath(),_.moveTo(n.x,n.y),_.font="normal 12px Arial",_.fillStyle="#eee";var I=h(e.id),k=Math.round(_.measureText(I).width),T=(2*c.radius-k)/2;_.fillText(I,n.x+T-c.radius,n.y+4);var $=t.deepMap[e.deep+1];if($)for(var C=(o-($*c.radius*2+($-1)*c.margin))/2,E=0,S=void 0;E<e.children.length;E++)S=e.children[E],p(S,{x:C+S.leftCount*(2*c.radius+c.margin)+c.radius,y:n.y+c.margin+2*c.radius})},x=t.isolated,y=o/2;if(x.length){y=(o-(x.length+1)*c.radius*2+x.length*c.margin)/2;for(var w=0;w<x.length;w++)p(x[w],{x:y+(w+1)*(2*c.radius+c.margin)+c.radius,y:c.margin+c.radius});y+=c.radius}g(t,{x:y,y:c.margin+c.radius}),p(t,{x:y,y:c.margin+c.radius}),d.__aq(t,c)}},drawManagerTree:function(t){var i=m;i.captureManagerItmes();var r=n.__U*(t.rows+1)+t.rows*n.__V+(n.__W+n.__U)*t.groups.length;d.__ar(r);var o=e.getElementById("mx_manager_canvas").getContext("2d");o.clearRect(0,0,n.__O,r);var s=n.__U,l=(n.__O-(1+n.__B)*n.__U)/n.__B|0,c=(o.font="normal 14px Arial",o.measureText("M").width),_=function(e,t,n,a){e.beginPath(),e.moveTo(t[0],t[1]),e.fillStyle=n.color,e.fillRect(t[0],t[1],t[2],t[3]),e.beginPath(),e.moveTo(t[0],t[1]+10),e.font="normal 14px Arial",e.fillStyle="#282828";for(var r,o=n.id;(o.length-3)*c>t[2];)o=o.slice(0,-1),r=!0;r&&(o=o.slice(0,-3)+"..."),e.fillText(o,t[0]+5,t[1]+25),n.package=a,n.rect=t,i.managerList.push(n)};!function(e){for(var t=0;t<e.length;t++){var i=e[t],r=n.__U,c=!1;o.beginPath(),o.moveTo(r,s),o.font="normal 14px Arial",o.fillStyle="#282828",o.fillText(i.name,r+5,s+25),s+=n.__W;var d=void 0,u=void 0,m=Math.max(i.maxLeft,i.maxRight),f={},h=0,v=(m-i.maxLeft)/2*(n.__V+n.__U),g=(m-i.maxRight)/2*(n.__V+n.__U);for(d=0;d<m;d++){var p=i.cleans.left[d],x=i.cleans.right[d];p&&(_(o,[r,s+v,150,n.__V],p,i.name),f[p.id]=p),x&&(_(o,[n.__O-n.__U-150,s+g,150,n.__V],x,i.name),f[x.id]=x,x.lineColor=a[h++%a.length]),s+=n.__U+n.__V}for(var y in f)if((u=f[y]).cleans)for(var w={x:u.rect[0]+u.rect[2],y:u.rect[1]+(u.rect[3]/2|0)},b=(u.cleans+"").split(","),M=b.length-1;M>=0;M--){var I=f[b[M]],k={x:I.rect[0],y:I.rect[1]+(I.rect[3]/2|0)};o.beginPath(),o.moveTo(w.x,w.y),o.lineTo(k.x,k.y),o.lineWidth=1,o.strokeStyle="#"+(I.lineColor||"996699"),o.stroke()}for(d=0;d<i.caches.length;d++)_(o,[r,s,l,n.__V],i.caches[d],i.name),(d+1)%n.__B==0?(r=n.__U,s+=n.__U+n.__V,c=!1):(r+=l+n.__U,c=!0);for(r=n.__U,c&&(s+=n.__U+n.__V),d=0;d<i.items.length;d++)u=i.items[d],_(o,[r,s,l,n.__V],u,i.name),(d+1)%n.__B==0?(r=n.__U,s+=n.__U+n.__V,c=!1):(r+=l+n.__U,c=!0);r=n.__U,c&&(s+=n.__W)}}(t.groups),d.__ap(t)},onHoverItem:function(e){var t=M.__d().getVOM();"enter"==e.action?d.__ak(t.get(e.item.id),e.item):d.__ah()},onHoverManagerItem:function(e){"enter"==e.action?d.__an(e.item):d.__ao()}},f={$:["zepto","fn.jquery"],jquery:["fn.jquery"],zepto:["zepto"],magix:["safeExec","toTry"]},h={},v=window.KISSY,g={prepare:function(){v.use("node")},getRootId:function(){return(v.Env.mods["magix/magix"]?v.require("magix/magix"):v.require("magix")).config("rootId")},getVOM:function(){if(v.Env.mods["magix/magix"])return v.require("magix/vom");var e=v.require("magix");return e.VOM||e.Vframe},getMangerMods:function(){var e=v.Env.mods,t=[];for(var i in e){var n=e[i].exports||e[i].value;n&&(n.$mMetas&&n.$mCache||n.$mm&&n.$mc||n.$m&&n.$c)&&t.push({name:e[i].name,exports:n})}return t},isReady:function(){var e=v.Env.mods["magix/magix"],t=v.Env.mods.node;if(e){var i=v.Env.mods["magix/vom"];return e.status===v.Loader.Status.ATTACHED&&i&&i.status===v.Loader.Status.ATTACHED&&t&&t.status===v.Loader.Status.ATTACHED}try{return(e=v.require("magix"))&&e.toTry&&t&&t.status===v.Loader.Status.ATTACHED}catch(e){return!1}},updateDOMStyle:function(e,t){var i=v.require("node").one("#"+t);if(i){var n,a=i,r={height:a.outerHeight?a.outerHeight():a.height(),width:a.outerWidth?a.outerWidth():a.width()};if(r.height)n=a.offset(),e.left=n.left+"px",e.top=n.top+"px",e.position="absolute",r.width=Math.max(r.width,a.children().width()||0),a;else{var o=4;do{if(a=a.children(),r.height=a.height(),a,r.height){var s=a.css("position");"fixed"==s?(s=a.css("left"),e.left=s,e.position=s,s=a.css("top"),e.top=s,s=a.css("right"),e.right=s,s=a.css("bottom"),e.bottom=s):(n=a.offset(),e.left=n.left+"px",e.top=n.top+"px",e.position="absolute",r.width=Math.max(r.width,a.children().width()||0));break}o--}while(a.length&&!r.height&&o>=0)}var l,c=-1;do{l||(l="none"==i.css("display"));var _=parseInt(i.css("z-index"))||1;_&&_>c&&(c=_),i=i.parent()}while(i);l&&(r={width:0,height:0}),1==c&&(c=2147483640),e.zIndex=c+1,e.width=r.width+"px",e.height=r.height+"px"}},getDOMOffset:function(e){return v.require("node").one("#"+e).offset()},bind:function(e,t,i){var n=v.require("node");return v.isString(e)&&(e="#"+e),n.one(e).on(t,i)},unbind:function(e,t,i){var n=v.require("node");return v.isString(e)&&(e="#"+e),n.one(e).detach(t,i)},getMixinId:function(e){for(var t=v.Env.mods,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if((o.exports||o.value)==a){i.push(r);break}}i.length<=n&&i.push("unknown")}return i},getResType:function(e){var t="",i=e.res||e.e;if(i)if(i.all&&i.constructor&&i.constructor.cached)t="Magix.Service";else if(i.fetchAll||i.all&&i.one&&i.next&&i.then)t="Model Manager";else if(i.bricks)t="Pagelet";else if(i.__attrs&&i.__attrVals&&i.constructor){var n=v.Env.mods,a=void 0;for(var r in n){var o=n[r],s=o.value||o.exports;if(s&&i.constructor==s){t=o.name,a=!0;break}}a||(t=i.hasOwnProperty("pagelet")?"Brick":"extend S Attribute")}else t=v.isFunction(i)?"\u51fd\u6570\u6216\u6784\u9020\u5668":v.type(i);else t=v.type(i);return t},hookAttachMod:function(e){var t=v.Loader.Utils.attachMod;v.Loader.Utils.attachMod=function(){t.apply(v.Loader.Utils,arguments),e()}},dragIt:function(e,t){var i=v.one(e),n=s.get(v.one,"detach",v.isFunction);v.one(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var a=parseInt(i.css("right"),10),r=parseInt(i.css("top"),10),o=e.pageX,s=e.pageY;n.begin(e.target,function(e){n.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),i.css({right:a-t,top:r+l})})}})},drawIcons:function(e){for(var t=e.length-1;t>=0;t--){var i=e[t],n=v.one("#"+i.id);n&&n.removeClass("mxi-a").removeClass("mxi-b").addClass("mxi-_"),i.cls&&n&&n.addClass(o[i.cls])}},getNode:function(e){return v.one(e)},hookViewShare:function(e){var t=v.Env.mods.magix;if(t&&(t=v.require("magix"))&&t.View&&t.View.prototype.share){var i=t.View.prototype.share;t.View.prototype.share=function(){i.apply(this,arguments),e()}}}},p={prepare:function(){},hookAttachMod:function(e){if(window.MutationObserver){new window.MutationObserver(function(){clearTimeout(void 0),setTimeout(e,1e3)}).observe(document.body,{subtree:!0,childList:!0,characterData:!0})}},getMod:function(e){var t=require.s.contexts._.defined,i=t[e]||h[e];if(!i&&f[e]){var n=f[e];for(var a in t){for(var r=!1,o=n.length-1;o>=0;o--){for(var s=n[o].split("."),l=t[a];s.length&&l;)l=l[s.shift()];if(l){r=!0;break}}if(r){i=t[a],h[e]=i;break}}}return i},getDL:function(){return this.getMod("$")||this.getMod("jquery")||this.getMod("zepto")},getRootId:function(){var e=this.getMod("magix/magix");return(e||this.getMod("magix")).config("rootId")},getVOM:function(){var e=this.getMod("magix/vom");if(e)return e;var t=this.getMod("magix");return t.VOM||t.Vframe},getMangerMods:function(){var e=require.s.contexts._.defined,t=[];for(var i in e){var n=e[i];n&&(n.$mMetas&&n.$mCache||n.$mm&&n.$mc||n.$m&&n.$c)&&t.push({name:i,exports:n})}return t},isReady:function(){return this.getMod("magix/magix")||this.getMod("magix")},updateDOMStyle:function(e,t){var i,n=this.getDL(),a=n("#"+t),r=a,o={height:r.outerHeight?r.outerHeight():r.height(),width:r.outerWidth?r.outerWidth():r.width()};if(o.height)i=r.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0),r;else{var s=4;do{if(r=r.children(),o.height=r.height(),r,o.height){var l=r.css("position");"fixed"==l?(l=r.css("left"),e.left=l,e.position=l,l=r.css("top"),e.top=l,l=r.css("right"),e.right=l,l=r.css("bottom"),e.bottom=l):(i=r.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0));break}s--}while(r.length&&!o.height&&s>=0)}var c,_=-1;do{c||(c="none"==a.css("display"));var d=parseInt(a.css("z-index"))||1;d&&d>_&&(_=d),a=a.parent()}while(a.length&&n.contains(document.body,a[0]));c&&(o={width:0,height:0}),1==_&&(_=2147483640),e.zIndex=_+1,e.width=o.width+"px",e.height=o.height+"px"},getDOMOffset:function(e){return this.getDL()("#"+e).offset()},bind:function(e,t,i){var n=this.getDL();return"string"==n.type(e)&&(e="#"+e),n(e).on(t,i)},unbind:function(e,t,i){var n=this.getDL();return"string"==n.type(e)&&(e="#"+e),n(e).off(t,i)},getMixinId:function(e){for(var t=require.s.contexts._.defined,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t)if(t[r]==a){i.push(r);break}i.length<=n&&i.push("unknown")}return i},getResType:function(e){var t=e.res||e.e,i=this.getDL(),n=i.type(e);return t&&(t.all&&t.constructor&&t.constructor.cached?n="Magix.Service":t.fetchAll||t.all&&t.one&&t.next&&t.then?n="Model Manager":t.bricks?n="Pagelet":i.isFunction(t)&&(n="\u51fd\u6570\u6216\u6784\u9020\u5668")),n},dragIt:function(e,t){var i=this.getDL(),n=i(e),a=s.get(i,"off",i.isFunction);i(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var i=parseInt(n.css("right"),10),r=parseInt(n.css("top"),10),o=e.pageX,s=e.pageY;a.begin(e.target,function(e){a.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),n.css({right:i-t,top:r+l})})}})},drawIcons:function(e){for(var t=this.getDL(),i=e.length-1;i>=0;i--){var n=e[i],a=t("#"+n.id);a&&a.removeClass("mxi-a").removeClass("mxi-b").addClass("mxi-_"),n.cls&&a&&a.addClass(o[n.cls])}},getNode:function(e){return this.getDL()(e)},hookViewShare:function(e){var t=this.getMod("magix");if(t&&t.View&&t.View.prototype.share){var i=t.View.prototype.share;t.View.prototype.share=function(){i.apply(this,arguments),e()}}}},x={},y={},w={};for(var b in p)x[b]=y[b]=w[b]=p[b];x.getMod=function(e){var t=seajs.cache,i=h[e];if(!i)for(var n in t){var a=t[n];if(a.id===e)return a.exports}if(!i&&f[e]){var r=f[e];for(var n in t){for(var o=!1,s=r.length-1;s>=0;s--){for(var l=r[s].split("."),c=t[n].exports;l.length&&c;)c=c[l.shift()];if(c){o=!0;break}}if(o){i=t[n].exports,h[e]=i;break}}}return i},x.getMangerMods=function(){var e=seajs.cache,t=[];for(var i in e){var n=e[i],a=n.exports;a&&a.$m&&a.$s&&t.push({name:n.id,exports:a})}return t},x.getMixinId=function(e){for(var t=seajs.cache,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if(o.exports==a){i.push(o.id);break}}i.length<=n&&i.push("unknown")}return i},y.getMod=function(e){var t;try{t=require(e)}catch(e){}return t||window.console.warn("seajs standalone\u6a21\u5f0f\u4e0b\u65e0\u6cd5\u627e\u5230\u6a21\u5757\uff1a"+e+"\uff0c\u4e5f\u65e0\u6cd5\u667a\u80fd\u63a2\u6d4b\u3002\u5982\u9700\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217"),t},y.getMangerMods=function(){return[]},y.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},w.getMod=function(e,t){if("magix"==key)return window.Magix},w.getDL=function(){return window.$||window.jQuery},w.getRootId=function(){return Magix.config("rootId")},w.getVOM=function(){return Magix.VOM||Magix.Vframe},w.getMangerMods=function(){return[]},w.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},w.isReady=function(){return!0};var M={__d:function(){return window.KISSY?g:window.requirejs?p:window.seajs?x:window.define&&window.require?y:window.Magix?w:void window.console.error("getEnvError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217")},__e:function(e){var t=[],i=0;if(e){var n=e.view&&(e.view.events||e.view.$evts)||e.$v&&e.$v.$eo,r=[],o=[];for(var s in n){i++;var l=n[s];isFinite(l)?(1==(1&l)&&r.push(s),2==(2&l)&&o.push(s)):r.push(s)}var c=e.view&&e.view.tmplEvents;c&&c.length&&(r=r.concat(c),i+=c.length),r.length&&t.push("&lt;"+r+"&gt;");var _=e.$v&&e.$v.$el,d=[],u=[],m=[],f={};if(_){for(var h=0,v=void 0;h<_.length;h++)if(v=_[h],i++,v.e)v.e==window?d.push(v.n):v.e==document&&u.push(v.n);else{var g=f[v.s];g?g.push(v.n):f[v.s]=[v.n]}for(var s in f)m.push("$"+s+"&lt;"+f[s]+"&gt;")}var p=e.$v&&e.$v.$so;if(o.length){for(var x={},y=0,w=void 0,b=void 0;y<o.length;y++){w=p[b=o[y]];for(var M in w){var I=x[M];I?I.push(b):x[M]=[b]}}for(var s in x)m.push("$"+s+"&lt;"+x[s]+"&gt;")}d.length&&t.push('<span style="color:#'+a[1]+'">$win&lt;'+d+"&gt;</span>"),u.length&&t.push('<span style="color:#'+a[3]+'">$doc&lt;'+u+"&gt;</span>"),m.length&&t.push('<span style="color:#'+a[4]+'">'+m+"</span>")}return{list:t,total:i}},__f:function(e){var t=[];if(e&&e.$v){var i=e.$v.$sd;if(i)for(var n in i)t.push(n)}return t},__g:function(e){var t,i=[];if(e){if(e.view){var n=e.view.$ol;n&&(t=n.pn,i=n.keys||n.ks)}if(e.$v){var a=e.$v.$l;a&&a.f&&(t=a.p,i=a.k)}}return{path:t,keys:i}},__j:function(e,t){var i=n.__h,a=n.__i,r=(a.r-i.r)/t,o=(a.g-i.g)/t,s=(a.b-i.b)/t;return"#"+("0"+parseInt(i.r+e*r).toString(16)).slice(-2)+("0"+parseInt(i.g+e*o).toString(16)).slice(-2)+("0"+parseInt(i.b+e*s).toString(16)).slice(-2)},__k:function(e){if(e){var t=e.view;if(t)return!t.template&&!t.tmpl;if(t=e.$v)return!t.tmpl}return!1},__l:function(e){if(e){var t=e.$v;if(t&&t.mixins)return t.mixins}return[]},__m:function(e){if(e){var t=e.$v;if(t&&t.$os)return t.$os}return[]},__w:function(t){var a=t.getRootId(),r=t.getVOM(),o=[],s={},l={total:0,comTotal:0,vomTotal:0,children:[]},c=r.all(),_={},d=!1;for(var u in c)c.hasOwnProperty(u)&&l.vomTotal++,_[u]=1;var m=function(e,t){var a=r.get(e),c={};if(a){l.total++,t.id=a.id,c.id=a.id,delete _[a.id],a.fcc||a.$cr?(t.status=i.__n,c.cls=""):a.fca||a.$ca?(t.status=i.__o,c.cls="alter",(a.cM&&!a.view||a.$c&&!a.$v)&&(t.status=i.__p,c.cls="bad")):(t.status=i.__p,c.cls="bad"),o.push(c),s[a.id]=t;var u=M.__e(a).total;if(u){var f=n.__q;u=Math.min(u,f),t.event=M.__j(u,f)}var h=M.__f(a);if(h.length){var v=n.__r,g=Math.min(h.length,v);t.shared=M.__j(g,v)}var p=M.__g(a);if(p.path||p.keys&&p.keys.length){var x=n.__s,y=p.keys||[],g=Math.min(x,y.length);t.location=M.__j(g,x)}var w=M.__l(a);if(w.length){var b=n.__t,g=Math.min(w.length,b);t.mixins=M.__j(g,b)}var I=M.__m(a);if(I.length){var v=n.__u,g=Math.min(I.length,v);t.state=M.__j(g,v)}t.inline=M.__k(a);var k=a.path;(t.inline||k&&k.indexOf("/gallery/")>0)&&(d=!0,t.component=!0,l.comTotal++);var T=a.cM||a.$c;for(var $ in T){var C={children:[]};m($,C),C.id&&t.children.push(C)}}};m(a,l);var f=e.getElementById("mx_com_view");f&&f.checked||!d||(d=function(e){for(var t=e.children.length-1;t>=0;t--){var i=e.children[t];i.component?e.children.splice(t,1):d(i)}})(l);var h=[];for(var v in _)h.push({id:v,il:!0,status:i.__v,children:[]}),o.push({id:v,cls:"bad"});return l.isolated=h,{tree:l,flattened:o,map:s}},__C:function(e){for(var t=e.getMangerMods(),i=[],a=0,o={},s=0,l={},c=0,_=0;_<t.length;_++){var d=t[_],u=d.exports.$mMetas||d.exports.$mm||d.exports.$m;u._$id||(u._$id="t"+c++),l[u._$id]&&(l[u._$id].continued=!0),l[u._$id]=d}for(var m=0;m<t.length;m++){var f=t[m],h=[],v={left:[],right:[]},g=[],p=0,x=0,y=0,w=void 0,b=void 0,M=f.exports.$mMetas||f.exports.$mm||f.exports.$m;if(delete M._$id,!f.continued){for(w in M)if((b=M[w]).cleans)for(var I=(b.cleans+"").split(","),k=0;k<I.length;k++)o[I[k]]=w;for(w in M){b=M[w];var T=r.__x,$={id:w,color:T,url:b.url||b.uri,cache:(b.cache||0|b.cacheTime)/1e3+"sec",desc:b.desc||"",cleans:b.cleans||"",cleaned:o[w]||"",hasAfter:b.after?(b.after+"").substr(0,200):""};b.cleans?(T=r.__y,$.color=T,v.left.push($),x++):o[w]?(T=r.__z,$.color=T,v.right.push($),y++):b.cache||b.cacheTime?(T=r.__A,$.color=T,g.push($)):(h.push($),p++),s++}}a+=Math.ceil(p/n.__B),a+=Math.max(x,y),a+=Math.ceil(g.length/n.__B),i.push({name:f.name,rows:a,cleans:v,caches:g,maxLeft:x,maxRight:y,items:h})}return{groups:i,rows:a,total:s}},__D:function(t){var i=M.__d();i.prepare();var n=50,a=function(){--n?e.body&&i.isReady()?t():setTimeout(a,500):window.console.error("prepareError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector(\u9700\u8981\u7684\u6a21\u5757\u5982jquery,magix\u7b49\u68c0\u6d4b\u4e0d\u5230)\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u65fa\u65fa\u8054\u7cfb\uff1a\u884c\u5217")};a()},__K:function(){M.__D(function(){d.__E();var e,t,n,a,r,o=M.__d(),s=o.getVOM(),l=0,c=function(){a&&t&&(l=0,m.drawTree(r.tree),clearInterval(t),a=t="")},_=function(){l=16,a&&!t&&(m.drawTree(r.tree,a),t=setInterval(function(){l?(l--,m.drawTree(r.tree,a)):c()},600))};document.onmouseout=document.onmouseover=function(e){clearTimeout(n),n=setTimeout(function(){for(var t,i=s.all(),n="mouseout"==e.type?e.relatedTarget:e.target;n&&n.parentNode;){var r=n.id;if(r&&i[r]){t=r;break}n=n.parentNode}t?t!=a&&(a=t,_()):c()},50)};var f=function(e){e.on("created",function(){u.__F("vframe:"+e.id+"["+(e.path||e.view.path||"")+"]\u6e32\u67d3\u5b8c\u6bd5",i.__n),v()}),e.on("alter",function(t){if(t.id&&!t.logged){t.logged=1;var n=s.get(t.id);n&&u.__F("\u4ecevframe:"+n.id+"["+(n.path||n.view.path||"")+"] \u53d1\u8d77\u754c\u9762\u53d8\u66f4",i.__G)}u.__F("vframe:"+e.id+"\u6536\u5230\u53d8\u66f4\u6d88\u606f",i.__o),v()}),e.on("viewInited",function(){u.__F("vframe:"+e.id+"\u7684view["+e.view.path+"]\uff0cinit\u8c03\u7528\u5b8c\u6bd5",i.__n)}),e.on("viewUnmounted",function(){var t=e.path||e.view&&e.view.path||"";t&&(t="["+t+"]"),u.__F("vframe:"+e.id+"\u7684view"+t+"\u9500\u6bc1\u5b8c\u6bd5",i.__H)}),e.on("viewMounted",function(){u.__F("vframe:"+e.id+"\u7684view["+(e.path||e.view.path||"")+"]\uff0c\u9996\u6b21\u6e32\u67d3\u5b8c\u6bd5",i.__n)}),e.___mh=!0},h=function(){var e=s.all();for(var t in e){var i=s.get(t);i.___mh||f(i)}},v=function(t){if(t)if("remove"==t.type)if(t.vframe){var n=t.vframe.path;!n&&t.vframe.view&&(n=t.vframe.view.path),n=n?"("+n+")":"",u.__F("\u4eceVOM\u4e2d\u79fb\u9664vframe:"+t.vframe.id+n,i.__I)}else u.__F("remove:",t);else"created"==t.type&&h();clearTimeout(e),e=setTimeout(function(){c(),r=M.__w(o),m.drawTree(r.tree),_(),o.drawIcons(r.flattened)},0)};s.on("add",function(e){v(),e.vframe.pId&&u.__F("\u627e\u5230vframe:"+e.vframe.pId+"\u7684\u5b50vframe:"+e.vframe.id,i.__G),u.__F("\u521b\u5efavframe:"+e.vframe.id,i.__G),f(e.vframe)}),s.on("remove",v);var g=s.get(o.getRootId());g&&g.on("created",v),h(),v(),M.__J=v;var p,x=function(){clearTimeout(p),p=setTimeout(function(){var e=M.__C(o);m.drawManagerTree(e)},500)};o.hookAttachMod(x),o.hookViewShare(v),x()})}};M.__K()}}();