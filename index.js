/*!1.2.7 kooboy_li@163.com*/!function(){var e=document,t=window;if(e.__)t.postMessage({_a:"mx_ispt",_b:"expand"},"*");else{t.addEventListener("message",function(e){var t=e.data;t&&"mx_ispt"==t._a&&"expand"==t._b&&u._c()},!1),e.__=1;var i={_n:"#008B00",_p:"#FF3030",_o:"#BC8F8F",_v:"#FF3030",_G:"#9AC0CD",_H:"#8B5F65",_I:"#EED5B7",_L:"#94d694"},n={_M:550,_N:470,_O:530,_P:400,_Q:490,_R:34,_S:6,_T:15,_B:5,_U:5,_V:40,_W:40,_h:{r:0,g:153,b:102},_i:{r:255,g:255,b:0},_q:15,_r:5,_s:12,_t:5,_u:12},a=["FFC125","C71585","CDBA96","FF7F00","BA55D3","8B4726","7CFC00","4A4A4A","EE7AE9"],r={_A:"#CC9966",_z:"#99CCCC",_y:"#FF9999",_x:"#CCCC99"},o={alter:"mxi-b",bad:"mxi-a"},s={get:function(e,t,i){var n,a=e(window),r=e(document),o=function(e){(e=window.getSelection)?e().removeAllRanges():(e=window.document.selection)&&(e.empty?e.empty():e=null)},s=function(e){e.preventDefault()},l=function(e){n.iMove&&n.move(e)},c=function(i){if(n){r[t]("mousemove touchmove",l)[t]("mouseup touchend",c)[t]("keydown mousewheel DOMMouseScroll",s),a[t]("blur",c);var o=n.node;e(o)[t]("losecapture",c),o.setCapture&&o.releaseCapture(),n.iStop&&n.stop(i),n=null}};return{begin:function(t,d,u){c(),t&&(o(),t.setCapture&&t.setCapture(),n={move:d,stop:u,node:t,iMove:i(d),iStop:i(u)},r.on("mousemove touchmove",l).on("mouseup touchend",c).on("keydown mousewheel DOMMouseScroll",s),a.on("blur",c),e(t).on("losecapture",c))},clear:o,end:c}}},l=/[&<>]/g,c={"&":"amp","<":"lt",">":"gt"},d=function(e){return e.replace(l,function(e){return"&"+c[e]+";"})},u={_E:function(){var t=e.createElement("div");t.innerHTML='<div class="mxi-e" id="mx"><ul class="mxi-p mxi-d" id="mx_tabs"><li class="mxi-l mxi-n mxi-m" id="mx_min">\u25b3</li><li class="mxi-k mxi-n mxi-m">VOM</li><li class="mxi-k mxi-n mxi-m">Tracer</li><li class="mxi-k mxi-n mxi-m">Manager</li></ul><div id="mx_painter"><div style="width:{_M}px;height:{_P}px;overflow-x:auto;overflow-y:hidden" id="mx_view_cnt"><canvas width="{_M}" height="{_P}" id="mx_view_canvas"></canvas></div><label class="mxi-k mxi-h"><input type="checkbox" class="mxi-j" id="mx_log_console">\u63a7\u5236\u53f0\u663e\u793aview\u4fe1\u606f</label><label class="mxi-k mxi-h"><input type="checkbox" class="mxi-j" id="mx_com_view" checked="checked">\u663e\u793a\u7ec4\u4ef6view</label><ul class="mxi-p mxi-k" id="mx_view_total"></ul></div><div id="mx_trancer" style="height:{_P}px;overflow:scroll;overflow-x:auto;display:none;padding:8px"></div><div id="mx_manager" style="display:none"><div style="height:{_P}px;overflow:scroll;overflow-x:auto" id="mx_manager_cnt"><canvas width="{_O}" height="{_P}" id="mx_manager_canvas"></canvas></div><ul class="mxi-p mxi-n" id="mx_manager_total"></ul></div><div id="mx_moreinfo"></div><div id="mx_manager_moreinfo"></div></div>'.replace(/\{(\w+)\}/g,function(e,t){return n[t]}),e.documentElement.appendChild(t),u._X(),M._d().dragIt("#mx","#mx_tabs")},_X:function(){u._Y();var t,i=M._d();i.bind("mx_view_canvas","mousemove",u._Z=function(e){clearTimeout(t),t=setTimeout(function(){var t=i.getDOMOffset("mx_view_canvas");u._a_({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),i.bind("mx_view_canvas","mouseout",u._aa=function(){clearTimeout(t),u._a_({x:-1,y:-1})}),i.bind("mx_manager_canvas","mousemove",u._ab=function(e){clearTimeout(t),t=setTimeout(function(){var t=i.getDOMOffset("mx_manager_canvas");u._ac({x:e.pageX-t.left,y:e.pageY-t.top})},10)}),i.bind("mx_manager_canvas","mouseout",u._ad=function(){clearTimeout(t),u._ac({x:-1,y:-1})}),i.bind("mx_moreinfo","mouseover",u._ae=function(){clearTimeout(u._af)}),i.bind("mx_moreinfo","mouseout",u._ag=function(){u._ah()}),i.bind("mx_log_console","click",function(){e.getElementById("mx_log_console").checked&&window.console.dir(i.getVOM().all())}),i.bind("mx_com_view","click",function(){M._J()}),i.bind("mx","click",u._ai=function(t){var a;"mx_min"==t.target.id?(a=e.getElementById("mx"),"\u25b3"==t.target.innerHTML?(a.style.height=n._R+"px",a.style.width="40px",a.style.overflow="hidden",t.target.innerHTML="\u25bd",i.getNode("#mx_tabs").addClass("mxi-r")):(a.style.height=n._N+"px",a.style.width=n._M+"px",a.style.overflow="inherit",t.target.innerHTML="\u25b3",i.getNode("#mx_tabs").removeClass("mxi-r"))):"VOM"==t.target.innerHTML?((a=e.getElementById("mx_painter")).style.display="block",(a=e.getElementById("mx_trancer")).style.display="none",(a=e.getElementById("mx_manager")).style.display="none"):"Tracer"==t.target.innerHTML?((a=e.getElementById("mx_painter")).style.display="none",(a=e.getElementById("mx_manager")).style.display="none",(a=e.getElementById("mx_trancer")).style.display="block"):"Manager"==t.target.innerHTML&&((a=e.getElementById("mx_painter")).style.display="none",(a=e.getElementById("mx_trancer")).style.display="none",(a=e.getElementById("mx_manager")).style.display="block")})},_c:function(){var t=e.getElementById("mx_min"),i=M._d();if("\u25bd"==t.innerHTML){var a=e.getElementById("mx");a.style.height=n._N+"px",a.style.width=n._M+"px",a.style.overflow="inherit",t.innerHTML="\u25b3",i.getNode("#mx_tabs").removeClass("mxi-r")}},_Y:function(){var e=M._d();e.unbind("mx_view_canvas","mousemove",u._Z),e.unbind("mx_view_canvas","mouseout",u._aa),e.unbind("mx_manager_canvas","mousemove",u._aj),e.unbind("mx_manager_canvas","mouseout",u._ad),e.unbind("mx_min","click",u._ai),e.unbind("mx_moreinfo","mouseoout",u._ag),e.unbind("mx_moreinfo","mouseover",u._ae)},_ak:function(t,i){clearTimeout(u._af),e.getElementById("mx_log_console").checked&&window.console.log(t);var a=e.getElementById("mx_cover");a||((a=e.createElement("div")).className="mxi-f",a.id="mx_cover",e.body.appendChild(a));var r=e.getElementById("mx_moreinfo");r.style.display="block";var o=i.center.x-n._Q/2-e.getElementById("mx_view_cnt").scrollLeft;r.style.left=o+"px",r.style.top=i.center.y+i.radius+n._R+5+"px";var s=M._d();s.updateDOMStyle(a.style,t.id),a.style.display="block",r.innerHTML='<ul><li><b class="mxi-c">id:</b>{id}</li><li><b class="mxi-c">view:</b>{view}</li>{events} {location} {share} {mixins} {state}<li class="mxi-o">{ex}</li><li><b class="mxi-c">resources</b></li><li style="{moreInfoWidth}px;overflow:auto;max-height:200px">{res}</li></ul>'.replace(/\{(\w+)\}/g,function(e,a){switch(a){case"id":return i.id;case"view":if(t){if(t.$v||t.path)return d(t.path);if(t.view)return d(t.view.path)}return"";case"events":var r=M._e(t);return r.total?'<li><b class="mxi-c">listen:</b>'+r.list+"</li>":"";case"share":var o=M._f(t);return o.length?'<li><b class="mxi-c">share:</b>'+o+"</li>":"";case"location":var l=M._g(t);if(l.path||l.keys&&l.keys.length){var c=[];return l.path&&c.push('<span style="color:#FFC125">path</span>'),l.keys&&(c=c.concat(l.keys)),'<li><b class="mxi-c">location:</b>'+c+"</li>"}return"";case"mixins":var u=M._l(t);if(u.length){var m=s.getMixinId(u);return'<li><b class="mxi-c">mixins:</b>'+(m=m.join(","))+"</li>"}return"";case"state":var f=M._m(t);return f.length?'<li><b class="mxi-c">state:</b>'+f.join(",")+"</li>":"";case"ex":if(i.il)return"\u88ab\u5b64\u7acb\u7684\u8282\u70b9\uff0c\u597d\u53ef\u601c\u2026\u2026";if(!t)return"vframe\u5df2\u88ab\u9500\u6bc1\uff0c\u4f46\u672a\u4ecevom\u4e2d\u79fb\u9664";if(t.path){if(t.cM&&!t.view||t.$c&&!t.$v)return"\u672a\u52a0\u8f7dview"}else if(!t.view)return"\u672a\u52a0\u8f7dview";if(t.cM){if(!t.fcc)return t.rC!=t.cC?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d"}else if(!t.$cr)return t.$rc!=t.$cc?"\u6b63\u7b49\u5f85\u5b50view\u52a0\u8f7d":"\u6b63\u7b49\u5f85view\u52a0\u8f7d";return t.fca||t.$ca?"\u7b49\u5f85view\u6e32\u67d3":"";case"res":var h=[],v=t&&t.view&&t.view.$res,g=void 0;if(v=v||t&&t.$v&&t.$v.$r){for(var p in v){g=!0;break}if(g){h.push('<table style="width:100%"><tr><td>key</td><td>type</td></tr>');for(var p in v)h.push("<tr><td>",p,"</td><td>",s.getResType(v[p]),"</td></tr>");h.push("</table>")}}return h.join("");default:return n[a]}})},_ah:function(){var t=e.getElementById("mx_moreinfo"),i=e.getElementById("mx_cover");u._af=setTimeout(function(){t.style.display="none",i.style.display="none"},150)},_am:function(t){clearTimeout(u._al);var i=e.getElementById("mx_manager_moreinfo");i.style.display="block",i.style.left=t.rect[0]+"px";var a=t.rect[1]+t.rect[3]+n._R;a-=e.getElementById("mx_manager_cnt").scrollTop,i.style.top=a+"px",i.innerHTML="<ul><li><b>key:</b>{id}</li><li><b>url:</b>{url}</li><li><b>\u63cf\u8ff0:</b>{desc}</li><li><b>\u7f13\u5b58:</b>{cache}</li><li><b>\u6e05\u7406\u7f13\u5b58:</b>{cleans}</li><li><b>\u9884\u5904\u7406:</b>{hasAfter}</li></ul>".replace(/\{(\w+)\}/g,function(e,i){switch(i){case"id":return t.id;default:return t[i]}})},_an:function(){var t=e.getElementById("mx_manager_moreinfo");u._al=setTimeout(function(){t.style.display="none"},150)},_ao:function(t){e.getElementById("mx_manager_total").innerHTML='<li class="mxi-k mxi-g">{groups}\u4e2a\u63a5\u53e3\u6587\u4ef6\uff0c\u5171{total}\u4e2a\u63a5\u53e3</li>'.replace(/\{(\w+)\}/g,function(e,i){switch(i){case"groups":return t.groups.length;case"total":return t.total}})},_ap:function(t){e.getElementById("mx_view_total").innerHTML='<li class="mxi-k mxi-g mxi-i">view\u7edf\u8ba1:[{count}]</li>'.replace(/\{(\w+)\}/g,function(e,i){switch(i){case"count":return"com:"+t.comTotal+",vom:"+t.vomTotal+",total:"+t.total}})},_aq:function(t){e.getElementById("mx_manager_canvas").height=0|t},_ar:function(t){var i=e.getElementById("mx_view_canvas");i.width=0|t,i.parentNode.scrollLeft=(i.width-n._O)/2},_a_:function(e){},_ac:function(e){}};!function(e,t){var i=document.createElement("style");document.documentElement.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}(0,'vframe{display:block}.mxi-_:before{width:12px;content:"M";height:12px;border-radius:6px;position:absolute;background-color:#008b00;opacity:.4;font-size:10px;line-height:12px;text-align:center;color:#fff}.mxi-a:before{background-color:#ff3030}.mxi-b:before{background-color:#bc8f8f}.mxi-c{padding-right:5px}.mxi-d{background:#eee;cursor:move;margin:0;padding:0}.mxi-e{position:fixed;right:20px;top:20px;width:550px;height:470px;z-index:2147483647;-webkit-box-shadow:0 0 5px #b9b9b9;box-shadow:0 0 5px #b9b9b9;background-color:#fff;font-size:12px;line-height:1.5}.mxi-f{position:absolute;opacity:.7;background-color:#90ee90}.mxi-e ul{list-style:none;padding:0;margin:0}.mxi-g{padding:5px}.mxi-h{height:28px;line-height:28px;margin:0 0 0 5px;padding:0}.mxi-i{color:#bbb}.mxi-j{margin-right:3px}.mxi-k{float:left}.mxi-l{float:right}.mxi-m{cursor:pointer}.mxi-n{padding:8px}.mxi-o{color:red}.mxi-p:after,.mxi-p:before{content:"";display:table}.mxi-p:after{clear:both}.mxi-p{*zoom:1}.mxi-q{height:1px;border:0;padding:0;margin:5px;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,hsla(270,6%,49%,.33)),to(rgba(165,69,243,0)))}#mx_manager_moreinfo,#mx_moreinfo{position:absolute;background-color:#eee;padding:8px;width:440px;display:none;-webkit-box-shadow:0 2px 2px 2px #b9b9b9;box-shadow:0 2px 2px 2px #b9b9b9;word-break:break-all}.mxi-r:before{left:4px;bottom:5px}.mxi-r:after,.mxi-r:before{content:" ";position:absolute;top:10px;border:2px dotted #b9b1b1;height:10px;cursor:move}.mxi-r:after{left:9px}');var m={_F:function(t,i){var n=e.getElementById("mx_trancer");if(m._as){var a=e.createElement("hr");a.className="mxi-q",n.insertBefore(a,n.firstChild),delete m._as}var r=e.createElement("div");r.innerHTML=t,i&&(r.style.color=i),n.insertBefore(r,n.firstChild),n.getElementsByTagName("div").length>200&&(n.removeChild(n.lastChild),n.removeChild(n.lastChild)),clearTimeout(m._at),m._at=setTimeout(function(){m._as=!0},1500)}},f={captureItmes:function(){var e=f;e.list=[],delete e.$last,u._a_=function(t){var i,n;if(e.$last?(n=e.$last,Math.pow(Math.pow(n.center.x-t.x,2)+Math.pow(n.center.y-t.y,2),.5)>n.radius&&(e.onHoverItem({item:n,action:"leave"}),delete e.$last,i=!0)):i=!0,i)for(var a=e.list.length-1;a>=0;a--)if(n=e.list[a],Math.pow(Math.pow(n.center.x-t.x,2)+Math.pow(n.center.y-t.y,2),.5)<=n.radius){e.$last!=n&&(e.$last=n,e.onHoverItem({item:n,action:"enter"}));break}}},captureManagerItmes:function(){var e=f;e.managerList=[],delete e.$managerLast,u._ac=function(t){var i,n,a;if(e.$managerLast?(a=(n=e.$managerLast).rect,(t.x<a[0]||t.y<a[1]||t.x>a[0]+a[2]||t.y>a[1]+a[3])&&(e.onHoverManagerItem({item:n,action:"leave"}),delete e.$managerLast,i=!0)):i=!0,i)for(var r=e.managerList.length-1;r>=0;r--)a=(n=e.managerList[r]).rect,t.x>=a[0]&&t.y>=a[1]&&t.x<=a[0]+a[2]&&t.y<=a[1]+a[3]&&e.$managerLast!=n&&(e.$managerLast=n,e.onHoverManagerItem({item:n,action:"enter"}))}},getBestParams:function(e,t,i){var a=0,r=0,o={},s=function(e,t){e.deep=t,t>r&&(r=t),o[t]||(o[t]=0),e.leftCount=o[t],o[t]++,o[t]>a&&(a=o[t]);for(var i=0;i<e.children.length;i++)e.children[i],s(e.children[i],e.deep+1)};e.deepMap=o,s(e,1,0);var l=t/(a=Math.max(a,e.isolated.length+1))-n._S,c=i/r-n._S,d=t,m=2*n._T;l<m?(l=m,(d=m*a+(a+1)*n._S)>3e4&&(d=3e4),u._ar(d)):u._ar(d);var f=Math.floor(Math.min(c,l)/2),h=(f/20).toFixed(1);return{width:d,margin:n._S,radius:f,band:h}},drawTree:function(t,r){if(t.id){var o=n._M,s=n._P,l=f;l.captureItmes();var c=l.getBestParams(t,o,s);o=c.width;var d=e.getElementById("mx_view_canvas").getContext("2d");d.clearRect(0,0,o,s);var m=2*c.radius-2*(c.band+1)-1;l.$tWidth||(l.$tWidth={});var h=function(e){return l.$tWidth[e]||(d.font="normal 12px Arial",l.$tWidth[e]=d.measureText(e).width),l.$tWidth[e]},v=function(e){for(var t=1,i=0;t<=e.length;){if(!((i+=h(e.substring(t-1,t)))<m))return e.substring(0,t-3)+"..";t+=1}return e},g=0,p=function(e,i,n,r){if(n){d.beginPath();var s=180*Math.atan((i.y-n.y)/(i.x-n.x))/Math.PI;s<0&&(s+=180);var l=Math.round(n.x+c.radius*Math.cos(s*Math.PI/180)),u=Math.round(n.y+c.radius*Math.sin(s*Math.PI/180));d.moveTo(l,u),d.lineTo(i.x,i.y),d.lineWidth=c.band/1.5,d.strokeStyle=r,d.stroke()}var m=t.deepMap[e.deep+1];if(m)for(var f=(o-(m*c.radius*2+(m-1)*c.margin))/2,h="#"+a[g++%a.length],v=0,x=void 0;v<e.children.length;v++)x=e.children[v],p(x,{x:f+x.leftCount*(2*c.radius+c.margin)+c.radius,y:i.y+c.margin+2*c.radius},i,h)},x=function(e,n){d.moveTo(n.x,n.y),d.beginPath(),d.arc(n.x,n.y,c.radius,0,2*Math.PI,!0),d.fillStyle=e.status,e.id==r&&(e.flag?d.fillStyle=i._L:d.fillStyle=e.status,e.flag=!e.flag),d.fill();var a=Math.max(.5,c.radius/10),s=n.y+c.radius/2,u=n.x-c.radius/2+a;if(e.event&&(d.beginPath(),d.arc(u,s,a,0,2*Math.PI,!0),d.fillStyle=e.event,d.fill()),e.location&&(d.beginPath(),d.arc(n.x,s+a,a,0,2*Math.PI,!0),d.fillStyle=e.location,d.fill()),e.mixins){var m=s,f=s+a,h=((b=u)+(M=n.x)+Math.sqrt(3)*(f-m))/2-(M-b)/10,g=(m+f-Math.sqrt(3)*(M-b))/2+(M-b)/3;d.beginPath(),d.arc(h,g,a,0,2*Math.PI,!0),d.fillStyle=e.mixins,d.fill()}if(e.shared){var p=n.x+c.radius/2-a;d.beginPath(),d.arc(p,s,a,0,2*Math.PI,!0),d.fillStyle=e.shared,d.fill()}if(e.state){var m=s+a,f=s,h=((b=n.x)+(M=n.x+c.radius/2-a)+Math.sqrt(3)*(f-m))/2+(M-b)/10,g=(m+f-Math.sqrt(3)*(M-b))/2+(M-b)/3;d.beginPath(),d.arc(h,g,a,0,2*Math.PI,!0),d.fillStyle=e.state,d.fill()}if(e.inline){d.beginPath();var _=c.radius-c.band-1,y=-2*Math.PI/360*60,w=-2*Math.PI/360*120,b=n.x+_*Math.cos(y),m=n.y+_*Math.sin(y),M=n.x+_*Math.cos(w),f=n.y+_*Math.sin(w);d.moveTo(b,m),d.quadraticCurveTo(n.x,n.y-_/2,M,f),d.moveTo(b,m),d.quadraticCurveTo(n.x,n.y-c.radius-c.band,M,f),d.fillStyle="#fff",d.fill()}d.moveTo(n.x,n.y),d.beginPath(),d.arc(n.x,n.y,c.radius-c.band-1,0,2*Math.PI,!0),d.lineWidth=c.band,d.strokeStyle="#fff",d.stroke(),l.list.push({id:e.id,center:n,il:e.il,radius:c.radius}),d.beginPath(),d.moveTo(n.x,n.y),d.font="normal 12px Arial",d.fillStyle="#eee";var k=v(e.id),I=Math.round(d.measureText(k).width),T=(2*c.radius-I)/2;d.fillText(k,n.x+T-c.radius,n.y+4);var $=t.deepMap[e.deep+1];if($)for(var C=(o-($*c.radius*2+($-1)*c.margin))/2,E=0,S=void 0;E<e.children.length;E++)S=e.children[E],x(S,{x:C+S.leftCount*(2*c.radius+c.margin)+c.radius,y:n.y+c.margin+2*c.radius})},_=t.isolated,y=o/2;if(_.length){y=(o-(_.length+1)*c.radius*2+_.length*c.margin)/2;for(var w=0;w<_.length;w++)x(_[w],{x:y+(w+1)*(2*c.radius+c.margin)+c.radius,y:c.margin+c.radius});y+=c.radius}p(t,{x:y,y:c.margin+c.radius}),x(t,{x:y,y:c.margin+c.radius}),u._ap(t,c)}},drawManagerTree:function(t){var i=f;i.captureManagerItmes();var r=n._U*(t.rows+1)+t.rows*n._V+(n._W+n._U)*t.groups.length;u._aq(r);var o=e.getElementById("mx_manager_canvas").getContext("2d");o.clearRect(0,0,n._O,r);var s=n._U,l=(n._O-(1+n._B)*n._U)/n._B|0,c=(o.font="normal 14px Arial",o.measureText("M").width),d=function(e,t,n,a){e.beginPath(),e.moveTo(t[0],t[1]),e.fillStyle=n.color,e.fillRect(t[0],t[1],t[2],t[3]),e.beginPath(),e.moveTo(t[0],t[1]+10),e.font="normal 14px Arial",e.fillStyle="#282828";for(var r,o=n.id;(o.length-3)*c>t[2];)o=o.slice(0,-1),r=!0;r&&(o=o.slice(0,-3)+"..."),e.fillText(o,t[0]+5,t[1]+25),n.package=a,n.rect=t,i.managerList.push(n)};!function(e){for(var t=0;t<e.length;t++){var i=e[t],r=n._U,c=!1;o.beginPath(),o.moveTo(r,s),o.font="normal 14px Arial",o.fillStyle="#282828",o.fillText(i.name,r+5,s+25),s+=n._W;var u=void 0,m=void 0,f=Math.max(i.maxLeft,i.maxRight),h={},v=0,g=(f-i.maxLeft)/2*(n._V+n._U),p=(f-i.maxRight)/2*(n._V+n._U);for(u=0;u<f;u++){var x=i.cleans.left[u],_=i.cleans.right[u];x&&(d(o,[r,s+g,150,n._V],x,i.name),h[x.id]=x),_&&(d(o,[n._O-n._U-150,s+p,150,n._V],_,i.name),h[_.id]=_,_.lineColor=a[v++%a.length]),s+=n._U+n._V}for(var y in h)if((m=h[y]).cleans)for(var w={x:m.rect[0]+m.rect[2],y:m.rect[1]+(m.rect[3]/2|0)},b=(m.cleans+"").split(","),M=b.length-1;M>=0;M--){var k=h[b[M]],I={x:k.rect[0],y:k.rect[1]+(k.rect[3]/2|0)};o.beginPath(),o.moveTo(w.x,w.y),o.lineTo(I.x,I.y),o.lineWidth=1,o.strokeStyle="#"+(k.lineColor||"996699"),o.stroke()}for(u=0;u<i.caches.length;u++)d(o,[r,s,l,n._V],i.caches[u],i.name),(u+1)%n._B==0?(r=n._U,s+=n._U+n._V,c=!1):(r+=l+n._U,c=!0);for(r=n._U,c&&(s+=n._U+n._V),u=0;u<i.items.length;u++)m=i.items[u],d(o,[r,s,l,n._V],m,i.name),(u+1)%n._B==0?(r=n._U,s+=n._U+n._V,c=!1):(r+=l+n._U,c=!0);r=n._U,c&&(s+=n._W)}}(t.groups),u._ao(t)},onHoverItem:function(e){var t=M._d().getVOM();"enter"==e.action?u._ak(t.get(e.item.id),e.item):u._ah()},onHoverManagerItem:function(e){"enter"==e.action?u._am(e.item):u._an()}},h={$:["zepto","fn.jquery"],jquery:["fn.jquery"],zepto:["zepto"],magix:["safeExec","toTry"]},v={},g=window.KISSY,p={prepare:function(){g.use("node")},getRootId:function(){return(g.Env.mods["magix/magix"]?g.require("magix/magix"):g.require("magix")).config("rootId")},getVOM:function(){if(g.Env.mods["magix/magix"])return g.require("magix/vom");var e=g.require("magix");return e.VOM||e.Vframe},getMangerMods:function(){var e=g.Env.mods,t=[];for(var i in e){var n=e[i].exports||e[i].value;n&&(n.$mMetas&&n.$mCache||n.$mm&&n.$mc||n.$m&&n.$c)&&t.push({name:e[i].name,exports:n})}return t},isReady:function(){var e=g.Env.mods["magix/magix"],t=g.Env.mods.node;if(e){var i=g.Env.mods["magix/vom"];return e.status===g.Loader.Status.ATTACHED&&i&&i.status===g.Loader.Status.ATTACHED&&t&&t.status===g.Loader.Status.ATTACHED}try{return(e=g.require("magix"))&&e.toTry&&t&&t.status===g.Loader.Status.ATTACHED}catch(e){return!1}},updateDOMStyle:function(e,t){var i=g.require("node").one("#"+t);if(i){var n,a=i,r={height:a.outerHeight?a.outerHeight():a.height(),width:a.outerWidth?a.outerWidth():a.width()};if(r.height)n=a.offset(),e.left=n.left+"px",e.top=n.top+"px",e.position="absolute",r.width=Math.max(r.width,a.children().width()||0),a;else{var o=4;do{if(a=a.children(),r.height=a.height(),a,r.height){var s=a.css("position");"fixed"==s?(s=a.css("left"),e.left=s,e.position=s,s=a.css("top"),e.top=s,s=a.css("right"),e.right=s,s=a.css("bottom"),e.bottom=s):(n=a.offset(),e.left=n.left+"px",e.top=n.top+"px",e.position="absolute",r.width=Math.max(r.width,a.children().width()||0));break}o--}while(a.length&&!r.height&&o>=0)}var l,c=-1;do{l||(l="none"==i.css("display"));var d=parseInt(i.css("z-index"))||1;d&&d>c&&(c=d),i=i.parent()}while(i);l&&(r={width:0,height:0}),1==c&&(c=2147483640),e.zIndex=c+1,e.width=r.width+"px",e.height=r.height+"px"}},getDOMOffset:function(e){return g.require("node").one("#"+e).offset()},bind:function(e,t,i){var n=g.require("node");return g.isString(e)&&(e="#"+e),n.one(e).on(t,i)},unbind:function(e,t,i){var n=g.require("node");return g.isString(e)&&(e="#"+e),n.one(e).detach(t,i)},getMixinId:function(e){for(var t=g.Env.mods,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if((o.exports||o.value)==a){i.push(r);break}}i.length<=n&&i.push("unknown")}return i},getResType:function(e){var t="",i=e.res||e.e;if(i)if(i.all&&i.constructor&&i.constructor.cached)t="Magix.Service";else if(i.fetchAll||i.all&&i.one&&i.next&&i.then)t="Model Manager";else if(i.bricks)t="Pagelet";else if(i.__attrs&&i.__attrVals&&i.constructor){var n=g.Env.mods,a=void 0;for(var r in n){var o=n[r],s=o.value||o.exports;if(s&&i.constructor==s){t=o.name,a=!0;break}}a||(t=i.hasOwnProperty("pagelet")?"Brick":"extend S Attribute")}else t=g.isFunction(i)?"\u51fd\u6570\u6216\u6784\u9020\u5668":g.type(i);else t=g.type(i);return t},hookAttachMod:function(e){var t=g.Loader.Utils.attachMod;g.Loader.Utils.attachMod=function(){t.apply(g.Loader.Utils,arguments),e()}},dragIt:function(e,t){var i=g.one(e),n=s.get(g.one,"detach",g.isFunction);g.one(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var a=parseInt(i.css("right"),10),r=parseInt(i.css("top"),10),o=e.pageX,s=e.pageY;n.begin(e.target,function(e){n.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),i.css({right:a-t,top:r+l})})}})},drawIcons:function(e){for(var t=e.length-1;t>=0;t--){var i=e[t],n=g.one("#"+i.id);n&&n.removeClass("mxi-a").removeClass("mxi-b").addClass("mxi-_"),i.cls&&n&&n.addClass(o[i.cls])}},getNode:function(e){return g.one(e)},hookViewShare:function(e){var t=g.Env.mods.magix;if(t&&(t=g.require("magix"))&&t.View&&t.View.prototype.share){var i=t.View.prototype.share;t.View.prototype.share=function(){i.apply(this,arguments),e()}}}},x={prepare:function(){},hookAttachMod:function(e){if(window.MutationObserver){new window.MutationObserver(function(){clearTimeout(void 0),setTimeout(e,1e3)}).observe(document.body,{subtree:!0,childList:!0,characterData:!0})}},getMod:function(e){var t=require.s.contexts._.defined,i=t[e]||v[e];if(!i&&h[e]){var n=h[e];for(var a in t){for(var r=!1,o=n.length-1;o>=0;o--){for(var s=n[o].split("."),l=t[a];s.length&&l;)l=l[s.shift()];if(l){r=!0;break}}if(r){i=t[a],v[e]=i;break}}}return i},getDL:function(){return this.getMod("$")||this.getMod("jquery")||this.getMod("zepto")},getRootId:function(){var e=this.getMod("magix/magix");return(e||this.getMod("magix")).config("rootId")},getVOM:function(){var e=this.getMod("magix/vom");if(e)return e;var t=this.getMod("magix");return t.VOM||t.Vframe},getMangerMods:function(){var e=require.s.contexts._.defined,t=[];for(var i in e){var n=e[i];n&&(n.$mMetas&&n.$mCache||n.$mm&&n.$mc||n.$m&&n.$c)&&t.push({name:i,exports:n})}return t},isReady:function(){return this.getMod("magix/magix")||this.getMod("magix")},updateDOMStyle:function(e,t){var i,n=this.getDL(),a=n("#"+t),r=a,o={height:r.outerHeight?r.outerHeight():r.height(),width:r.outerWidth?r.outerWidth():r.width()};if(o.height)i=r.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0),r;else{var s=4;do{if(r=r.children(),o.height=r.height(),r,o.height){var l=r.css("position");"fixed"==l?(l=r.css("left"),e.left=l,e.position=l,l=r.css("top"),e.top=l,l=r.css("right"),e.right=l,l=r.css("bottom"),e.bottom=l):(i=r.offset(),e.left=i.left+"px",e.top=i.top+"px",e.position="absolute",o.width=Math.max(o.width,r.children().width()||0));break}s--}while(r.length&&!o.height&&s>=0)}var c,d=-1;do{c||(c="none"==a.css("display"));var u=parseInt(a.css("z-index"))||1;u&&u>d&&(d=u),a=a.parent()}while(a.length&&n.contains(document.body,a[0]));c&&(o={width:0,height:0}),1==d&&(d=2147483640),e.zIndex=d+1,e.width=o.width+"px",e.height=o.height+"px"},getDOMOffset:function(e){return this.getDL()("#"+e).offset()},bind:function(e,t,i){var n=this.getDL();return"string"==n.type(e)&&(e="#"+e),n(e).on(t,i)},unbind:function(e,t,i){var n=this.getDL();return"string"==n.type(e)&&(e="#"+e),n(e).off(t,i)},getMixinId:function(e){for(var t=require.s.contexts._.defined,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t)if(t[r]==a){i.push(r);break}i.length<=n&&i.push("unknown")}return i},getResType:function(e){var t=e.res||e.e,i=this.getDL(),n=i.type(e);return t&&(t.all&&t.constructor&&t.constructor.cached?n="Magix.Service":t.fetchAll||t.all&&t.one&&t.next&&t.then?n="Model Manager":t.bricks?n="Pagelet":i.isFunction(t)&&(n="\u51fd\u6570\u6216\u6784\u9020\u5668")),n},dragIt:function(e,t){var i=this.getDL(),n=i(e),a=s.get(i,"off",i.isFunction);i(t).on("mousedown",function(e){if(e.target.id==t.slice(1)){var i=parseInt(n.css("right"),10),r=parseInt(n.css("top"),10),o=e.pageX,s=e.pageY;a.begin(e.target,function(e){a.clear();var t=e.pageX-o,l=e.pageY-s;r+l<0&&(l=-r),n.css({right:i-t,top:r+l})})}})},drawIcons:function(e){for(var t=this.getDL(),i=e.length-1;i>=0;i--){var n=e[i],a=t("#"+n.id);a&&a.removeClass("mxi-a").removeClass("mxi-b").addClass("mxi-_"),n.cls&&a&&a.addClass(o[n.cls])}},getNode:function(e){return this.getDL()(e)},hookViewShare:function(e){var t=this.getMod("magix");if(t&&t.View&&t.View.prototype.share){var i=t.View.prototype.share;t.View.prototype.share=function(){i.apply(this,arguments),e()}}}},_={},y={},w={};for(var b in x)_[b]=y[b]=w[b]=x[b];_.getMod=function(e){var t=seajs.cache,i=v[e];if(!i)for(var n in t){var a=t[n];if(a.id===e)return a.exports}if(!i&&h[e]){var r=h[e];for(var n in t){for(var o=!1,s=r.length-1;s>=0;s--){for(var l=r[s].split("."),c=t[n].exports;l.length&&c;)c=c[l.shift()];if(c){o=!0;break}}if(o){i=t[n].exports,v[e]=i;break}}}return i},_.getMangerMods=function(){var e=seajs.cache,t=[];for(var i in e){var n=e[i],a=n.exports;a&&a.$m&&a.$s&&t.push({name:n.id,exports:a})}return t},_.getMixinId=function(e){for(var t=seajs.cache,i=[],n=0;n<e.length;n++){var a=e[n];if(a)if(a["\x1e"])i.push('<span style="color:#C71585">State.clean("'+a["\x1e"]+'")</span>');else for(var r in t){var o=t[r];if(o.exports==a){i.push(o.id);break}}i.length<=n&&i.push("unknown")}return i},y.getMod=function(e){var t;try{t=require(e)}catch(e){}return t||window.console.warn("seajs standalone\u6a21\u5f0f\u4e0b\u65e0\u6cd5\u627e\u5230\u6a21\u5757\uff1a"+e+"\uff0c\u4e5f\u65e0\u6cd5\u667a\u80fd\u63a2\u6d4b\u3002\u5982\u9700\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217"),t},y.getMangerMods=function(){return[]},y.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},w.getMod=function(e,t){if("magix"==key)return window.Magix},w.getDL=function(){return window.$||window.jQuery},w.getRootId=function(){return Magix.config("rootId")},w.getVOM=function(){return Magix.VOM||Magix.Vframe},w.getMangerMods=function(){return[]},w.getMixinId=function(e){return new Array(e.length+2).join("unknown").slice(1)},w.isReady=function(){return!0};var M={_d:function(){return window.KISSY?p:window.requirejs?x:window.seajs?_:window.define&&window.require?y:window.Magix?w:void window.console.error("getEnvError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u9489\u9489\u8054\u7cfb\uff1a\u884c\u5217")},_e:function(e){var t=[],i=0;if(e){var n=e.view&&(e.view.events||e.view.$evts)||e.$v&&e.$v.$eo,r=[],o=[];for(var s in n){i++;var l=n[s];isFinite(l)?(1==(1&l)&&r.push(s),2==(2&l)&&o.push(s)):r.push(s)}var c=e.view&&e.view.tmplEvents;c&&c.length&&(r=r.concat(c),i+=c.length),r.length&&t.push("&lt;"+r+"&gt;");var d=e.$v&&e.$v.$el,u=[],m=[],f=[],h={};if(d){for(var v=0,g=void 0;v<d.length;v++)if(g=d[v],i++,g.e)g.e==window?u.push(g.n):g.e==document&&m.push(g.n);else{var p=h[g.s];p?p.push(g.n):h[g.s]=[g.n]}for(var s in h)f.push("$"+s+"&lt;"+h[s]+"&gt;")}var x=e.$v&&e.$v.$so;if(o.length){for(var _={},y=0,w=void 0,b=void 0;y<o.length;y++){w=x[b=o[y]];for(var M in w){var k=_[M];k?k.push(b):_[M]=[b]}}for(var s in _)f.push("$"+s+"&lt;"+_[s]+"&gt;")}u.length&&t.push('<span style="color:#'+a[1]+'">$win&lt;'+u+"&gt;</span>"),m.length&&t.push('<span style="color:#'+a[3]+'">$doc&lt;'+m+"&gt;</span>"),f.length&&t.push('<span style="color:#'+a[4]+'">'+f+"</span>")}return{list:t,total:i}},_f:function(e){var t=[];if(e&&e.$v){var i=e.$v.$sd;if(i)for(var n in i)t.push(n)}return t},_g:function(e){var t,i=[];if(e){if(e.view){var n=e.view.$ol;n&&(t=n.pn,i=n.keys||n.ks)}if(e.$v){var a=e.$v.$l;a&&a.f&&(t=a.p,i=a.k)}}return{path:t,keys:i}},_j:function(e,t){var i=n._h,a=n._i,r=(a.r-i.r)/t,o=(a.g-i.g)/t,s=(a.b-i.b)/t;return"#"+("0"+parseInt(i.r+e*r).toString(16)).slice(-2)+("0"+parseInt(i.g+e*o).toString(16)).slice(-2)+("0"+parseInt(i.b+e*s).toString(16)).slice(-2)},_k:function(e){if(e){var t=e.view;if(t)return!t.template&&!t.tmpl;if(t=e.$v)return!t.tmpl}return!1},_l:function(e){if(e){var t=e.$v;if(t&&t.mixins)return t.mixins}return[]},_m:function(e){if(e){var t=e.$v;if(t&&t.$os)return t.$os}return[]},_w:function(t){var a=t.getRootId(),r=t.getVOM(),o=[],s={},l={total:0,comTotal:0,vomTotal:0,children:[]},c=r.all(),d={},u=!1;for(var m in c)c.hasOwnProperty(m)&&l.vomTotal++,d[m]=1;var f=function(e,t){var a=r.get(e),c={};if(a){l.total++,t.id=a.id,c.id=a.id,delete d[a.id],a.fcc||a.$cr?(t.status=i._n,c.cls=""):a.fca||a.$ca?(t.status=i._o,c.cls="alter",(a.cM&&!a.view||a.$c&&!a.$v)&&(t.status=i._p,c.cls="bad")):(t.status=i._p,c.cls="bad"),o.push(c),s[a.id]=t;var m=M._e(a).total;if(m){var h=n._q;m=Math.min(m,h),t.event=M._j(m,h)}var v=M._f(a);if(v.length){var g=n._r,p=Math.min(v.length,g);t.shared=M._j(p,g)}var x=M._g(a);if(x.path||x.keys&&x.keys.length){var _=n._s,y=x.keys||[],p=Math.min(_,y.length);t.location=M._j(p,_)}var w=M._l(a);if(w.length){var b=n._t,p=Math.min(w.length,b);t.mixins=M._j(p,b)}var k=M._m(a);if(k.length){var g=n._u,p=Math.min(k.length,g);t.state=M._j(p,g)}t.inline=M._k(a);var I=a.path;(t.inline||I&&I.indexOf("/gallery/")>0)&&(u=!0,t.component=!0,l.comTotal++);var T=a.cM||a.$c;for(var $ in T){var C={children:[]};f($,C),C.id&&t.children.push(C)}}};f(a,l);var h=e.getElementById("mx_com_view");h&&h.checked||!u||(u=function(e){for(var t=e.children.length-1;t>=0;t--){var i=e.children[t];i.component?e.children.splice(t,1):u(i)}})(l);var v=[];for(var g in d)v.push({id:g,il:!0,status:i._v,children:[]}),o.push({id:g,cls:"bad"});return l.isolated=v,{tree:l,flattened:o,map:s}},_C:function(e){for(var t=e.getMangerMods(),i=[],a=0,o={},s=0,l={},c=0,d=0;d<t.length;d++){var u=t[d],m=u.exports.$mMetas||u.exports.$mm||u.exports.$m;m._$id||(m._$id="t"+c++),l[m._$id]&&(l[m._$id].continued=!0),l[m._$id]=u}for(var f=0;f<t.length;f++){var h=t[f],v=[],g={left:[],right:[]},p=[],x=0,_=0,y=0,w=void 0,b=void 0,M=h.exports.$mMetas||h.exports.$mm||h.exports.$m;if(delete M._$id,!h.continued){for(w in M)if((b=M[w]).cleans)for(var k=(b.cleans+"").split(","),I=0;I<k.length;I++)o[k[I]]=w;for(w in M){b=M[w];var T=r._x,$={id:w,color:T,url:b.url||b.uri,cache:(b.cache||0|b.cacheTime)/1e3+"sec",desc:b.desc||"",cleans:b.cleans||"",cleaned:o[w]||"",hasAfter:b.after?(b.after+"").substr(0,200):""};b.cleans?(T=r._y,$.color=T,g.left.push($),_++):o[w]?(T=r._z,$.color=T,g.right.push($),y++):b.cache||b.cacheTime?(T=r._A,$.color=T,p.push($)):(v.push($),x++),s++}}a+=Math.ceil(x/n._B),a+=Math.max(_,y),a+=Math.ceil(p.length/n._B),i.push({name:h.name,rows:a,cleans:g,caches:p,maxLeft:_,maxRight:y,items:v})}return{groups:i,rows:a,total:s}},_D:function(t){var i=M._d();i.prepare();var n=50,a=function(){--n?e.body&&i.isReady()?t():setTimeout(a,500):window.console.error("prepareError:\u65e0\u6cd5\u5728\u5f53\u524d\u73af\u5883\u4e0b\u542f\u52a8Magix Inspector(\u9700\u8981\u7684\u6a21\u5757\u5982jquery,magix\u7b49\u68c0\u6d4b\u4e0d\u5230)\uff0c\u5982\u9700\u66f4\u591a\u5e2e\u52a9\uff0c\u8bf7\u65fa\u65fa\u8054\u7cfb\uff1a\u884c\u5217")};a()},_K:function(){M._D(function(){u._E();var e,t,n,a,r,o=M._d(),s=o.getVOM(),l=0,c=function(){a&&t&&(l=0,f.drawTree(r.tree),clearInterval(t),a=t="")},d=function(){l=16,a&&!t&&(f.drawTree(r.tree,a),t=setInterval(function(){l?(l--,f.drawTree(r.tree,a)):c()},600))};document.onmouseout=document.onmouseover=function(e){clearTimeout(n),n=setTimeout(function(){for(var t,i=s.all(),n="mouseout"==e.type?e.relatedTarget:e.target;n&&n.parentNode;){var r=n.id;if(r&&i[r]){t=r;break}n=n.parentNode}t?t!=a&&(a=t,d()):c()},50)};var h=function(e){e.on("created",function(){m._F("vframe:"+e.id+"["+(e.path||e.view.path||"")+"]\u6e32\u67d3\u5b8c\u6bd5",i._n),g()}),e.on("alter",function(t){if(t.id&&!t.logged){t.logged=1;var n=s.get(t.id);n&&m._F("\u4ecevframe:"+n.id+"["+(n.path||n.view.path||"")+"] \u53d1\u8d77\u754c\u9762\u53d8\u66f4",i._G)}m._F("vframe:"+e.id+"\u6536\u5230\u53d8\u66f4\u6d88\u606f",i._o),g()}),e.on("viewInited",function(){m._F("vframe:"+e.id+"\u7684view["+e.view.path+"]\uff0cinit\u8c03\u7528\u5b8c\u6bd5",i._n)}),e.on("viewUnmounted",function(){var t=e.path||e.view&&e.view.path||"";t&&(t="["+t+"]"),m._F("vframe:"+e.id+"\u7684view"+t+"\u9500\u6bc1\u5b8c\u6bd5",i._H)}),e.on("viewMounted",function(){m._F("vframe:"+e.id+"\u7684view["+(e.path||e.view.path||"")+"]\uff0c\u9996\u6b21\u6e32\u67d3\u5b8c\u6bd5",i._n)}),e.___mh=!0},v=function(){var e=s.all();for(var t in e){var i=s.get(t);i.___mh||h(i)}},g=function(t){if(t)if("remove"==t.type)if(t.vframe){var n=t.vframe.path;!n&&t.vframe.view&&(n=t.vframe.view.path),n=n?"("+n+")":"",m._F("\u4eceVOM\u4e2d\u79fb\u9664vframe:"+t.vframe.id+n,i._I)}else m._F("remove:",t);else"created"==t.type&&v();clearTimeout(e),e=setTimeout(function(){c(),r=M._w(o),f.drawTree(r.tree),d(),o.drawIcons(r.flattened)},0)};s.on("add",function(e){g(),e.vframe.pId&&m._F("\u627e\u5230vframe:"+e.vframe.pId+"\u7684\u5b50vframe:"+e.vframe.id,i._G),m._F("\u521b\u5efavframe:"+e.vframe.id,i._G),h(e.vframe)}),s.on("remove",g);var p=s.get(o.getRootId());p&&p.on("created",g),v(),g(),M._J=g;var x,_=function(){clearTimeout(x),x=setTimeout(function(){var e=M._C(o);f.drawManagerTree(e)},500)};o.hookAttachMod(_),o.hookViewShare(g),_()})}};M._K()}}();